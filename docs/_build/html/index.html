

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome to the t3dserver documentation! &mdash; t3dserver  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            t3dserver
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Welcome to the t3dserver documentation!</a><ul>
<li><a class="reference internal" href="#installation-and-running-instructions-for-the-compox">Installation and running instructions for the Compox</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#environment-setup">Environment setup</a></li>
<li><a class="reference internal" href="#configuration-and-launching">Configuration and launching</a><ul>
<li><a class="reference internal" href="#server-settings">Server Settings</a></li>
<li><a class="reference internal" href="#algorithm-settings">Algorithm Settings</a></li>
<li><a class="reference internal" href="#ui-settings">UI Settings</a></li>
<li><a class="reference internal" href="#database-settings">Database Settings</a></li>
<li><a class="reference internal" href="#minio-configuration">MinIO Configuration</a></li>
<li><a class="reference internal" href="#if-run-minio-instance-is-true-the-following-must-be-set">If <code class="docutils literal notranslate"><span class="pre">run_minio_instance</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the following must be set:</a></li>
<li><a class="reference internal" href="#if-run-minio-instance-is-false-the-following-must-be-set">If <code class="docutils literal notranslate"><span class="pre">run_minio_instance</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the following must be set:</a></li>
<li><a class="reference internal" href="#minio-authentication">MinIO Authentication</a></li>
<li><a class="reference internal" href="#device-and-backend-configuration">Device and Backend Configuration</a></li>
<li><a class="reference internal" href="#if-server-backend-is-fastapi-background-tasks">If <code class="docutils literal notranslate"><span class="pre">server_backend</span></code> is <code class="docutils literal notranslate"><span class="pre">fastapi_background_tasks</span></code>:</a></li>
<li><a class="reference internal" href="#if-server-backend-is-celery">If <code class="docutils literal notranslate"><span class="pre">server_backend</span></code> is <code class="docutils literal notranslate"><span class="pre">celery</span></code>:</a></li>
<li><a class="reference internal" href="#ssl-configuration">SSL Configuration</a></li>
<li><a class="reference internal" href="#logging-and-resource-paths">Logging and Resource Paths</a></li>
<li><a class="reference internal" href="#packaging">Packaging</a></li>
<li><a class="reference internal" href="#notes">Notes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#deploying-algorithms-to-the-server">Deploying algorithms to the server</a></li>
<li><a class="reference internal" href="#developing-custom-algorithms">Developing custom algorithms</a></li>
<li><a class="reference internal" href="#running-tests-and-demo-app">Running tests and demo app</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#algorithms">Algorithms</a><ul>
<li><a class="reference internal" href="#how-to-create-an-algorithm-module">How to create an algorithm module</a><ul>
<li><a class="reference internal" href="#the-runner-py-file">The Runner.py file</a><ul>
<li><a class="reference internal" href="#algorithm-types">Algorithm types</a></li>
<li><a class="reference internal" href="#algorithm-tags">Algorithm tags</a></li>
<li><a class="reference internal" href="#the-preprocess-inference-and-postprocess-methods">The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code>, <code class="docutils literal notranslate"><span class="pre">inference</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> methods</a></li>
<li><a class="reference internal" href="#the-fetch-data-method-for-baserunner">The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method for BaseRunner</a></li>
<li><a class="reference internal" href="#the-fetch-data-method-for-specific-algorithm-types">The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method for specific algorithm types</a></li>
<li><a class="reference internal" href="#the-post-data-method-for-baserunner">The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method for BaseRunner</a></li>
<li><a class="reference internal" href="#the-post-data-method-for-specific-algorithm-types">The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method for specific algorithm types</a></li>
<li><a class="reference internal" href="#the-load-assets-method">The <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method</a></li>
<li><a class="reference internal" href="#the-log-message-method">The <code class="docutils literal notranslate"><span class="pre">log_message</span></code> method</a></li>
<li><a class="reference internal" href="#the-set-progress-method">The <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-pyproject-toml-file">The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file</a><ul>
<li><a class="reference internal" href="#mandatory-fields">Mandatory fields</a></li>
<li><a class="reference internal" href="#algorithm-type-tags-and-description">Algorithm type, tags, and description</a></li>
<li><a class="reference internal" href="#algorithm-supported-devices">Algorithm supported devices</a></li>
<li><a class="reference internal" href="#additional-parameters">Additional parameters</a></li>
<li><a class="reference internal" href="#other-fields">Other fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-files-directory">The <code class="docutils literal notranslate"><span class="pre">files</span></code> directory</a></li>
<li><a class="reference internal" href="#the-some-internal-submodule-directory">The <code class="docutils literal notranslate"><span class="pre">some_internal_submodule</span></code> directory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-of-a-dummy-algorithm">Example of a dummy algorithm</a></li>
<li><a class="reference internal" href="#a-general-template-for-creating-a-denoising-algorithm">A general template for creating a denoising algorithm</a><ul>
<li><a class="reference internal" href="#the-pyproject-toml-file">The pyproject.toml file</a></li>
<li><a class="reference internal" href="#the-algorithm-dependencies">The algorithm dependencies</a></li>
<li><a class="reference internal" href="#the-runner-py-file">The Runner.py file</a></li>
<li><a class="reference internal" href="#deploying-the-algorithm">Deploying the algorithm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-general-template-for-creating-a-segmentation-algorithm">A general template for creating a segmentation algorithm</a><ul>
<li><a class="reference internal" href="#the-pyproject-toml-file">The pyproject.toml file</a></li>
<li><a class="reference internal" href="#the-algorithm-dependencies">The algorithm dependencies</a></li>
<li><a class="reference internal" href="#the-runner-py-file">The Runner.py file</a></li>
<li><a class="reference internal" href="#deploying-the-algorithm">Deploying the algorithm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#a-general-template-for-creating-a-segmentation-algorithm">A general template for creating a segmentation algorithm</a><ul>
<li><a class="reference internal" href="#the-pyproject-toml-file">The pyproject.toml file</a></li>
<li><a class="reference internal" href="#the-algorithm-dependencies">The algorithm dependencies</a></li>
<li><a class="reference internal" href="#the-runner-py-file">The Runner.py file</a></li>
<li><a class="reference internal" href="#deploying-the-algorithm">Deploying the algorithm</a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer</span></code></a><ul>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.calculate_etag"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.calculate_etag()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.check_if_zip_is_importable"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.check_if_zip_is_importable()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_other_than_py_files"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.find_other_than_py_files()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_py_files"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.find_py_files()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.generate_uuid"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.generate_uuid()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_directory"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.hash_directory()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_py_file"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.hash_py_file()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.parse_pyproject_toml"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.parse_pyproject_toml()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.process_path_to_dict_key"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.process_path_to_dict_key()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.store_algorithm"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.store_algorithm()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmManager.AlgorithmManager"><code class="docutils literal notranslate"><span class="pre">AlgorithmManager</span></code></a><ul>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmManager.AlgorithmManager.delete_algorithms"><code class="docutils literal notranslate"><span class="pre">AlgorithmManager.delete_algorithms()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.AlgorithmManager.AlgorithmManager.list_algorithms"><code class="docutils literal notranslate"><span class="pre">AlgorithmManager.list_algorithms()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner"><code class="docutils literal notranslate"><span class="pre">BaseRunner</span></code></a><ul>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.fetch_asset"><code class="docutils literal notranslate"><span class="pre">BaseRunner.fetch_asset()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.fetch_data"><code class="docutils literal notranslate"><span class="pre">BaseRunner.fetch_data()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.inference"><code class="docutils literal notranslate"><span class="pre">BaseRunner.inference()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.inference_base"><code class="docutils literal notranslate"><span class="pre">BaseRunner.inference_base()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.load_assets"><code class="docutils literal notranslate"><span class="pre">BaseRunner.load_assets()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.load_item_from_session"><code class="docutils literal notranslate"><span class="pre">BaseRunner.load_item_from_session()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.log_message"><code class="docutils literal notranslate"><span class="pre">BaseRunner.log_message()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.post_data"><code class="docutils literal notranslate"><span class="pre">BaseRunner.post_data()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.postprocess"><code class="docutils literal notranslate"><span class="pre">BaseRunner.postprocess()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.postprocess_base"><code class="docutils literal notranslate"><span class="pre">BaseRunner.postprocess_base()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.preprocess"><code class="docutils literal notranslate"><span class="pre">BaseRunner.preprocess()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.preprocess_base"><code class="docutils literal notranslate"><span class="pre">BaseRunner.preprocess_base()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.register_task_handler"><code class="docutils literal notranslate"><span class="pre">BaseRunner.register_task_handler()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.remove_item_from_session"><code class="docutils literal notranslate"><span class="pre">BaseRunner.remove_item_from_session()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.run"><code class="docutils literal notranslate"><span class="pre">BaseRunner.run()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.save_item_to_session"><code class="docutils literal notranslate"><span class="pre">BaseRunner.save_item_to_session()</span></code></a></li>
<li><a class="reference internal" href="#algorithm_utils.BaseRunner.BaseRunner.set_progress"><code class="docutils literal notranslate"><span class="pre">BaseRunner.set_progress()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#id0"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer</span></code></a><ul>
<li><a class="reference internal" href="#id1"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.calculate_etag()</span></code></a></li>
<li><a class="reference internal" href="#id2"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.check_if_zip_is_importable()</span></code></a></li>
<li><a class="reference internal" href="#id3"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.find_other_than_py_files()</span></code></a></li>
<li><a class="reference internal" href="#id4"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.find_py_files()</span></code></a></li>
<li><a class="reference internal" href="#id5"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.generate_uuid()</span></code></a></li>
<li><a class="reference internal" href="#id6"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.hash_directory()</span></code></a></li>
<li><a class="reference internal" href="#id7"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.hash_py_file()</span></code></a></li>
<li><a class="reference internal" href="#id8"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.parse_pyproject_toml()</span></code></a></li>
<li><a class="reference internal" href="#id9"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.process_path_to_dict_key()</span></code></a></li>
<li><a class="reference internal" href="#id10"><code class="docutils literal notranslate"><span class="pre">AlgorithmDeployer.store_algorithm()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-tasks.TaskHandler">Tasks</a><ul>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler"><code class="docutils literal notranslate"><span class="pre">TaskHandler</span></code></a><ul>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.fetch_algorithm"><code class="docutils literal notranslate"><span class="pre">TaskHandler.fetch_algorithm()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.fetch_asset"><code class="docutils literal notranslate"><span class="pre">TaskHandler.fetch_asset()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.fetch_data"><code class="docutils literal notranslate"><span class="pre">TaskHandler.fetch_data()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.load_item_from_session"><code class="docutils literal notranslate"><span class="pre">TaskHandler.load_item_from_session()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.mark_as_completed"><code class="docutils literal notranslate"><span class="pre">TaskHandler.mark_as_completed()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.mark_as_failed"><code class="docutils literal notranslate"><span class="pre">TaskHandler.mark_as_failed()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.output_dataset_ids"><code class="docutils literal notranslate"><span class="pre">TaskHandler.output_dataset_ids</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.post_data"><code class="docutils literal notranslate"><span class="pre">TaskHandler.post_data()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.progress"><code class="docutils literal notranslate"><span class="pre">TaskHandler.progress</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.remove_item_from_session"><code class="docutils literal notranslate"><span class="pre">TaskHandler.remove_item_from_session()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.save_item_to_session"><code class="docutils literal notranslate"><span class="pre">TaskHandler.save_item_to_session()</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.session_token"><code class="docutils literal notranslate"><span class="pre">TaskHandler.session_token</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.status"><code class="docutils literal notranslate"><span class="pre">TaskHandler.status</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.task_id"><code class="docutils literal notranslate"><span class="pre">TaskHandler.task_id</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.time_completed"><code class="docutils literal notranslate"><span class="pre">TaskHandler.time_completed</span></code></a></li>
<li><a class="reference internal" href="#tasks.TaskHandler.TaskHandler.update_log"><code class="docutils literal notranslate"><span class="pre">TaskHandler.update_log()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler"><code class="docutils literal notranslate"><span class="pre">DebuggingTaskHandler</span></code></a><ul>
<li><a class="reference internal" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_algorithm"><code class="docutils literal notranslate"><span class="pre">DebuggingTaskHandler.fetch_algorithm()</span></code></a></li>
<li><a class="reference internal" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_asset"><code class="docutils literal notranslate"><span class="pre">DebuggingTaskHandler.fetch_asset()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-session.TaskSession">Sessions</a><ul>
<li><a class="reference internal" href="#session.TaskSession.TaskSession"><code class="docutils literal notranslate"><span class="pre">TaskSession</span></code></a><ul>
<li><a class="reference internal" href="#session.TaskSession.TaskSession.add_item"><code class="docutils literal notranslate"><span class="pre">TaskSession.add_item()</span></code></a></li>
<li><a class="reference internal" href="#session.TaskSession.TaskSession.clear_cache"><code class="docutils literal notranslate"><span class="pre">TaskSession.clear_cache()</span></code></a></li>
<li><a class="reference internal" href="#session.TaskSession.TaskSession.remove_item"><code class="docutils literal notranslate"><span class="pre">TaskSession.remove_item()</span></code></a></li>
<li><a class="reference internal" href="#session.TaskSession.TaskSession.session_token"><code class="docutils literal notranslate"><span class="pre">TaskSession.session_token</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#session.DataCache.DataCache"><code class="docutils literal notranslate"><span class="pre">DataCache</span></code></a><ul>
<li><a class="reference internal" href="#session.DataCache.DataCache.add_item"><code class="docutils literal notranslate"><span class="pre">DataCache.add_item()</span></code></a></li>
<li><a class="reference internal" href="#session.DataCache.DataCache.clear"><code class="docutils literal notranslate"><span class="pre">DataCache.clear()</span></code></a></li>
<li><a class="reference internal" href="#session.DataCache.DataCache.remove_item"><code class="docutils literal notranslate"><span class="pre">DataCache.remove_item()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-database_connection.BaseConnection">Database Connection</a><ul>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection"><code class="docutils literal notranslate"><span class="pre">BaseConnection</span></code></a><ul>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.check_collections_exists"><code class="docutils literal notranslate"><span class="pre">BaseConnection.check_collections_exists()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.check_objects_exist"><code class="docutils literal notranslate"><span class="pre">BaseConnection.check_objects_exist()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.create_collections"><code class="docutils literal notranslate"><span class="pre">BaseConnection.create_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.delete_collections"><code class="docutils literal notranslate"><span class="pre">BaseConnection.delete_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.delete_objects"><code class="docutils literal notranslate"><span class="pre">BaseConnection.delete_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.get_objects"><code class="docutils literal notranslate"><span class="pre">BaseConnection.get_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.list_collections"><code class="docutils literal notranslate"><span class="pre">BaseConnection.list_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.list_objects"><code class="docutils literal notranslate"><span class="pre">BaseConnection.list_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.put_objects"><code class="docutils literal notranslate"><span class="pre">BaseConnection.put_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.BaseConnection.BaseConnection.put_objects_with_duplicity_check"><code class="docutils literal notranslate"><span class="pre">BaseConnection.put_objects_with_duplicity_check()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection"><code class="docutils literal notranslate"><span class="pre">S3Connection</span></code></a><ul>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.check_collections_exists"><code class="docutils literal notranslate"><span class="pre">S3Connection.check_collections_exists()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.check_objects_exist"><code class="docutils literal notranslate"><span class="pre">S3Connection.check_objects_exist()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.create_collections"><code class="docutils literal notranslate"><span class="pre">S3Connection.create_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.delete_collections"><code class="docutils literal notranslate"><span class="pre">S3Connection.delete_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.delete_objects"><code class="docutils literal notranslate"><span class="pre">S3Connection.delete_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.get_objects"><code class="docutils literal notranslate"><span class="pre">S3Connection.get_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.list_collections"><code class="docutils literal notranslate"><span class="pre">S3Connection.list_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.list_objects"><code class="docutils literal notranslate"><span class="pre">S3Connection.list_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.put_objects"><code class="docutils literal notranslate"><span class="pre">S3Connection.put_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.S3Connection.S3Connection.put_objects_with_duplicity_check"><code class="docutils literal notranslate"><span class="pre">S3Connection.put_objects_with_duplicity_check()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection"><code class="docutils literal notranslate"><span class="pre">TempfileConnection</span></code></a><ul>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.check_collections_exists"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.check_collections_exists()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.check_objects_exist"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.check_objects_exist()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.create_collections"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.create_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.delete_collections"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.delete_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.delete_objects"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.delete_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.get_objects"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.get_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.list_collections"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.list_collections()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.list_objects"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.list_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.put_objects"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.put_objects()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.TempfileConnection.TempfileConnection.put_objects_with_duplicity_check"><code class="docutils literal notranslate"><span class="pre">TempfileConnection.put_objects_with_duplicity_check()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#database_connection.database_utils.calculate_etag"><code class="docutils literal notranslate"><span class="pre">calculate_etag()</span></code></a></li>
<li><a class="reference internal" href="#database_connection.database_utils.calculate_etag_multipart"><code class="docutils literal notranslate"><span class="pre">calculate_etag_multipart()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-server_utils">Server Utils</a><ul>
<li><a class="reference internal" href="#server_utils.algorithm_cache"><code class="docutils literal notranslate"><span class="pre">algorithm_cache()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.calculate_s3_etag"><code class="docutils literal notranslate"><span class="pre">calculate_s3_etag()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.check_and_create_database_collections"><code class="docutils literal notranslate"><span class="pre">check_and_create_database_collections()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.check_mps_availability"><code class="docutils literal notranslate"><span class="pre">check_mps_availability()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.check_system_gpu_availability"><code class="docutils literal notranslate"><span class="pre">check_system_gpu_availability()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.check_torch_with_cuda_available"><code class="docutils literal notranslate"><span class="pre">check_torch_with_cuda_available()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.data_cache"><code class="docutils literal notranslate"><span class="pre">data_cache()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.find_algorithm_by_id"><code class="docutils literal notranslate"><span class="pre">find_algorithm_by_id()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.generate_uuid"><code class="docutils literal notranslate"><span class="pre">generate_uuid()</span></code></a></li>
<li><a class="reference internal" href="#server_utils.weak_lru"><code class="docutils literal notranslate"><span class="pre">weak_lru()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-routers.algorithms_controller">Server Endpoints</a><ul>
<li><a class="reference internal" href="#routers.algorithms_controller.get_algorithm"><code class="docutils literal notranslate"><span class="pre">get_algorithm()</span></code></a></li>
<li><a class="reference internal" href="#routers.algorithms_controller.list_model_files"><code class="docutils literal notranslate"><span class="pre">list_model_files()</span></code></a></li>
<li><a class="reference internal" href="#routers.file_controller.delete_dataset"><code class="docutils literal notranslate"><span class="pre">delete_dataset()</span></code></a></li>
<li><a class="reference internal" href="#routers.file_controller.download_dataset"><code class="docutils literal notranslate"><span class="pre">download_dataset()</span></code></a></li>
<li><a class="reference internal" href="#routers.file_controller.upload_dataset"><code class="docutils literal notranslate"><span class="pre">upload_dataset()</span></code></a></li>
<li><a class="reference internal" href="#routers.execution_controller.execute_algorithm"><code class="docutils literal notranslate"><span class="pre">execute_algorithm()</span></code></a></li>
<li><a class="reference internal" href="#routers.execution_controller.get_execution_record"><code class="docutils literal notranslate"><span class="pre">get_execution_record()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-pydantic_models">Pydantic Models</a><ul>
<li><a class="reference internal" href="#pydantic_models.Algorithm"><code class="docutils literal notranslate"><span class="pre">Algorithm</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.Algorithm.algorithm_name"><code class="docutils literal notranslate"><span class="pre">Algorithm.algorithm_name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.Algorithm.algorithm_major_version"><code class="docutils literal notranslate"><span class="pre">Algorithm.algorithm_major_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.Algorithm.model_config"><code class="docutils literal notranslate"><span class="pre">Algorithm.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_id"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_input_queue"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_input_queue</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_minor_version"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_minor_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_name"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_version"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_type"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_type</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_tags"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_tags</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_description"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.algorithm_description</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.supported_devices"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.supported_devices</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.default_device"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.default_device</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.additional_parameters"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.additional_parameters</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse.model_config"><code class="docutils literal notranslate"><span class="pre">AlgorithmRegisteredResponse.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.ExecutionLogRecord"><code class="docutils literal notranslate"><span class="pre">ExecutionLogRecord</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.ExecutionLogRecord.log"><code class="docutils literal notranslate"><span class="pre">ExecutionLogRecord.log</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionLogRecord.model_config"><code class="docutils literal notranslate"><span class="pre">ExecutionLogRecord.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.execution_id"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.execution_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.algorithm_id"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.algorithm_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.input_dataset_ids"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.input_dataset_ids</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.execution_device_override"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.execution_device_override</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.additional_parameters"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.additional_parameters</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.session_token"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.session_token</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.output_dataset_ids"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.output_dataset_ids</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.status"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.status</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.progress"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.progress</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.time_started"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.time_started</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.time_completed"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.time_completed</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.log"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.log</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionRecord.model_config"><code class="docutils literal notranslate"><span class="pre">ExecutionRecord.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.ExecutionResponse"><code class="docutils literal notranslate"><span class="pre">ExecutionResponse</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.ExecutionResponse.execution_id"><code class="docutils literal notranslate"><span class="pre">ExecutionResponse.execution_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ExecutionResponse.model_config"><code class="docutils literal notranslate"><span class="pre">ExecutionResponse.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse"><code class="docutils literal notranslate"><span class="pre">FailedAlgorithmRegisteredResponse</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_name"><code class="docutils literal notranslate"><span class="pre">FailedAlgorithmRegisteredResponse.algorithm_name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_version"><code class="docutils literal notranslate"><span class="pre">FailedAlgorithmRegisteredResponse.algorithm_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse.message"><code class="docutils literal notranslate"><span class="pre">FailedAlgorithmRegisteredResponse.message</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse.model_config"><code class="docutils literal notranslate"><span class="pre">FailedAlgorithmRegisteredResponse.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.FileUploadBody"><code class="docutils literal notranslate"><span class="pre">FileUploadBody</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.FileUploadBody.file_body"><code class="docutils literal notranslate"><span class="pre">FileUploadBody.file_body</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.FileUploadBody.model_config"><code class="docutils literal notranslate"><span class="pre">FileUploadBody.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.FileUploadResponse"><code class="docutils literal notranslate"><span class="pre">FileUploadResponse</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.FileUploadResponse.file_id"><code class="docutils literal notranslate"><span class="pre">FileUploadResponse.file_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.FileUploadResponse.model_config"><code class="docutils literal notranslate"><span class="pre">FileUploadResponse.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.algorithm_id"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.algorithm_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.input_dataset_id"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.input_dataset_id</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.execution_device_override"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.execution_device_override</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.additional_parameters"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.additional_parameters</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.session_token"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.session_token</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.IncomingExecutionRequest.model_config"><code class="docutils literal notranslate"><span class="pre">IncomingExecutionRequest.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.MinioServer"><code class="docutils literal notranslate"><span class="pre">MinioServer</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.MinioServer.executable_path"><code class="docutils literal notranslate"><span class="pre">MinioServer.executable_path</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServer.storage_path"><code class="docutils literal notranslate"><span class="pre">MinioServer.storage_path</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServer.console_address"><code class="docutils literal notranslate"><span class="pre">MinioServer.console_address</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServer.address"><code class="docutils literal notranslate"><span class="pre">MinioServer.address</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServer.model_config"><code class="docutils literal notranslate"><span class="pre">MinioServer.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.MinioServerInfo"><code class="docutils literal notranslate"><span class="pre">MinioServerInfo</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.MinioServerInfo.storage_path"><code class="docutils literal notranslate"><span class="pre">MinioServerInfo.storage_path</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServerInfo.console_address"><code class="docutils literal notranslate"><span class="pre">MinioServerInfo.console_address</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServerInfo.address"><code class="docutils literal notranslate"><span class="pre">MinioServerInfo.address</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.MinioServerInfo.model_config"><code class="docutils literal notranslate"><span class="pre">MinioServerInfo.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.ResponseMessage"><code class="docutils literal notranslate"><span class="pre">ResponseMessage</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.ResponseMessage.detail"><code class="docutils literal notranslate"><span class="pre">ResponseMessage.detail</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.ResponseMessage.model_config"><code class="docutils literal notranslate"><span class="pre">ResponseMessage.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.RootMessage"><code class="docutils literal notranslate"><span class="pre">RootMessage</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.RootMessage.name"><code class="docutils literal notranslate"><span class="pre">RootMessage.name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.tags"><code class="docutils literal notranslate"><span class="pre">RootMessage.tags</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.group"><code class="docutils literal notranslate"><span class="pre">RootMessage.group</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.organization"><code class="docutils literal notranslate"><span class="pre">RootMessage.organization</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.domain"><code class="docutils literal notranslate"><span class="pre">RootMessage.domain</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.version"><code class="docutils literal notranslate"><span class="pre">RootMessage.version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.cuda_available"><code class="docutils literal notranslate"><span class="pre">RootMessage.cuda_available</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.cuda_capable_devices_count"><code class="docutils literal notranslate"><span class="pre">RootMessage.cuda_capable_devices_count</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.RootMessage.model_config"><code class="docutils literal notranslate"><span class="pre">RootMessage.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.S3Bucket"><code class="docutils literal notranslate"><span class="pre">S3Bucket</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.S3Bucket.bucket_name"><code class="docutils literal notranslate"><span class="pre">S3Bucket.bucket_name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3Bucket.model_config"><code class="docutils literal notranslate"><span class="pre">S3Bucket.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile"><code class="docutils literal notranslate"><span class="pre">S3ModelFile</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.runner_path"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.runner_path</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.algorithm_path"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.algorithm_path</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.algorithm_name"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.algorithm_name</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.algorithm_major_version"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.algorithm_major_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.algorithm_minor_version"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.algorithm_minor_version</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFile.model_config"><code class="docutils literal notranslate"><span class="pre">S3ModelFile.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFileRecord"><code class="docutils literal notranslate"><span class="pre">S3ModelFileRecord</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.S3ModelFileRecord.algorithm_key"><code class="docutils literal notranslate"><span class="pre">S3ModelFileRecord.algorithm_key</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.S3ModelFileRecord.model_config"><code class="docutils literal notranslate"><span class="pre">S3ModelFileRecord.model_config</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#pydantic_models.UrlResponse"><code class="docutils literal notranslate"><span class="pre">UrlResponse</span></code></a><ul>
<li><a class="reference internal" href="#pydantic_models.UrlResponse.url"><code class="docutils literal notranslate"><span class="pre">UrlResponse.url</span></code></a></li>
<li><a class="reference internal" href="#pydantic_models.UrlResponse.model_config"><code class="docutils literal notranslate"><span class="pre">UrlResponse.model_config</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">t3dserver</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Welcome to the t3dserver documentation!</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="welcome-to-the-t3dserver-documentation">
<h1>Welcome to the t3dserver documentation!<a class="headerlink" href="#welcome-to-the-t3dserver-documentation" title="Link to this heading"></a></h1>
<section id="installation-and-running-instructions-for-the-compox">
<h2>Installation and running instructions for the Compox<a class="headerlink" href="#installation-and-running-instructions-for-the-compox" title="Link to this heading"></a></h2>
<p>compox is a simple Python execution engine based on FastAPI with a MinIO object storage and Celery task queue. The app is designed to run algorithms written in Python on the server and report the results to the user.</p>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading"></a></h3>
<p>At this point, the documentation is not available online. You can serve the documentation locally by running the following command in the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>serve_docs
</pre></div>
</div>
<p>The documentation will be available at <code class="docutils literal notranslate"><span class="pre">http://localhost:8234</span></code>.</p>
<p>If you want to specify a different port, you can do so by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>serve_docs<span class="w"> </span><span class="o">{</span>port_number<span class="o">}</span>
</pre></div>
</div>
<p>Replace <code class="docutils literal notranslate"><span class="pre">{port_number}</span></code> with the desired port number. The documentation will be available at <code class="docutils literal notranslate"><span class="pre">http://localhost:{port_number}</span></code>.</p>
</section>
<section id="environment-setup">
<h3>Environment setup<a class="headerlink" href="#environment-setup" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>It is assumed, that you have Python 3.10 installed on your system (Python 3.11 should also be okay) and activated in your commandline. You will need to install the pdm package manager. To install it, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pdm
</pre></div>
</div>
</li>
<li><p>Clone the repository and navigate to the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://gitlab.t3d.team/dl/python-computing-backend
<span class="nb">cd</span><span class="w"> </span>compox
</pre></div>
</div>
</li>
<li><p>Install the required packages to a virtual Python environment using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install
</pre></div>
</div>
</li>
<li><p>The server uses MinIO for storing files. The MinIO server will be downloaded to the <em>compox/minio</em> directory by default after running the pdm install command. If for some reason the minio binary download fails, you may either download the binary manually from the MinIO website (<code class="docutils literal notranslate"><span class="pre">https://min.io/download</span></code>) and place it in the <em>compox/minio</em> directory or run the following command in the <em>compox</em> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>get_minio
</pre></div>
</div>
</li>
</ol>
</section>
<section id="configuration-and-launching">
<h3>Configuration and launching<a class="headerlink" href="#configuration-and-launching" title="Link to this heading"></a></h3>
<p>The server configuration is defined in a config.yaml file. The following settings can be configured:</p>
<section id="server-settings">
<h4>Server Settings<a class="headerlink" href="#server-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>compox_port</strong>: <code class="docutils literal notranslate"><span class="pre">5461</span></code></p>
<ul>
<li><p>Defines the port on which the Compox runs.</p></li>
</ul>
</li>
</ul>
</section>
<section id="algorithm-settings">
<h4>Algorithm Settings<a class="headerlink" href="#algorithm-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>algorithm_add_remove_in_menus</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<ul>
<li><p>Determines whether algorithms can be added/removed from menus dynamically.</p></li>
</ul>
</li>
<li><p><strong>algorithms_path</strong>: <code class="docutils literal notranslate"><span class="pre">./algorithms</span></code></p>
<ul>
<li><p>Path where algorithms are stored.</p></li>
</ul>
</li>
</ul>
</section>
<section id="ui-settings">
<h4>UI Settings<a class="headerlink" href="#ui-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>use_systray</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
<ul>
<li><p>Enables or disables the system tray feature.</p></li>
</ul>
</li>
</ul>
</section>
<section id="database-settings">
<h4>Database Settings<a class="headerlink" href="#database-settings" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>database_backend</strong>: <code class="docutils literal notranslate"><span class="pre">s3</span></code></p>
<ul>
<li><p>Defines the database backend (<code class="docutils literal notranslate"><span class="pre">s3</span></code> or other backends if applicable).</p></li>
</ul>
</li>
<li><p><strong>data_store_expire_days</strong>: <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<ul>
<li><p>Number of days before stored data expires.</p></li>
</ul>
</li>
</ul>
</section>
<section id="minio-configuration">
<h4>MinIO Configuration<a class="headerlink" href="#minio-configuration" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>run_minio_instance</strong>: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
<ul>
<li><p>Determines whether a local MinIO instance should be run.</p></li>
</ul>
</li>
</ul>
</section>
<section id="if-run-minio-instance-is-true-the-following-must-be-set">
<h4>If <code class="docutils literal notranslate"><span class="pre">run_minio_instance</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>, the following must be set:<a class="headerlink" href="#if-run-minio-instance-is-true-the-following-must-be-set" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>minio_console_address</strong>: <code class="docutils literal notranslate"><span class="pre">9090</span></code></p>
<ul>
<li><p>Port for the MinIO console.</p></li>
</ul>
</li>
<li><p><strong>minio_address</strong>: <code class="docutils literal notranslate"><span class="pre">9091</span></code></p>
<ul>
<li><p>Port for the MinIO service.</p></li>
</ul>
</li>
<li><p><strong>minio_executible_path</strong>: <code class="docutils literal notranslate"><span class="pre">minio/TESCAN3DBackendDB.exe</span></code></p>
<ul>
<li><p>Path to the MinIO executable.</p></li>
</ul>
</li>
<li><p><strong>minio_storage_path</strong>: <code class="docutils literal notranslate"><span class="pre">minio/compox_store</span></code></p>
<ul>
<li><p>Path for MinIO storage.</p></li>
</ul>
</li>
</ul>
</section>
<section id="if-run-minio-instance-is-false-the-following-must-be-set">
<h4>If <code class="docutils literal notranslate"><span class="pre">run_minio_instance</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>, the following must be set:<a class="headerlink" href="#if-run-minio-instance-is-false-the-following-must-be-set" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>s3_endpoint_url</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p>
<ul>
<li><p>URL for an external S3 endpoint.</p></li>
</ul>
</li>
</ul>
</section>
<section id="minio-authentication">
<h4>MinIO Authentication<a class="headerlink" href="#minio-authentication" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>minio_user</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p></li>
<li><p><strong>minio_password</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<ul>
<li><p>If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, credentials are read from <code class="docutils literal notranslate"><span class="pre">MINIO_ROOT_USER</span></code> and <code class="docutils literal notranslate"><span class="pre">MINIO_ROOT_PASSWORD</span></code> environment variables.</p></li>
<li><p>If environment variables are not found, credentials are randomly generated UUIDs.</p></li>
</ul>
</li>
</ul>
</section>
<section id="device-and-backend-configuration">
<h4>Device and Backend Configuration<a class="headerlink" href="#device-and-backend-configuration" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>device</strong>: <code class="docutils literal notranslate"><span class="pre">cuda</span></code></p>
<ul>
<li><p>Defines the computing device (<code class="docutils literal notranslate"><span class="pre">cuda</span></code> for GPU, <code class="docutils literal notranslate"><span class="pre">cpu</span></code> for CPU).</p></li>
<li><p><strong>This setting is currently deprecated and will be removed in future versions, as the device is currently resolved per algorithm.</strong></p></li>
</ul>
</li>
<li><p><strong>cuda_visible_devices</strong>: <code class="docutils literal notranslate"><span class="pre">0</span></code></p>
<ul>
<li><p>Specifies the GPU device(s) to be used.</p></li>
</ul>
</li>
<li><p><strong>server_backend</strong>: <code class="docutils literal notranslate"><span class="pre">fastapi_background_tasks</span></code></p>
<ul>
<li><p>Specifies the backend type (<code class="docutils literal notranslate"><span class="pre">fastapi_background_tasks</span></code> or <code class="docutils literal notranslate"><span class="pre">celery</span></code>).</p></li>
</ul>
</li>
</ul>
</section>
<section id="if-server-backend-is-fastapi-background-tasks">
<h4>If <code class="docutils literal notranslate"><span class="pre">server_backend</span></code> is <code class="docutils literal notranslate"><span class="pre">fastapi_background_tasks</span></code>:<a class="headerlink" href="#if-server-backend-is-fastapi-background-tasks" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>background_tasks_worker_number</strong>: <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<ul>
<li><p>Number of worker threads for background tasks.</p></li>
<li><p><strong>This setting is currently very experimental and will not work as expected, 1 worker is recommended.</strong></p></li>
</ul>
</li>
</ul>
</section>
<section id="if-server-backend-is-celery">
<h4>If <code class="docutils literal notranslate"><span class="pre">server_backend</span></code> is <code class="docutils literal notranslate"><span class="pre">celery</span></code>:<a class="headerlink" href="#if-server-backend-is-celery" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>celery_broker_url</strong>: <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code></p>
<ul>
<li><p>URL for the Celery message broker.</p></li>
</ul>
</li>
</ul>
</section>
<section id="ssl-configuration">
<h4>SSL Configuration<a class="headerlink" href="#ssl-configuration" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>use_ssl</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<ul>
<li><p>Enables or disables SSL encryption.</p></li>
</ul>
</li>
<li><p><strong>ssl_keyfile</strong>: <code class="docutils literal notranslate"><span class="pre">key.pem</span></code></p>
<ul>
<li><p>Path to the SSL key file.</p></li>
</ul>
</li>
<li><p><strong>ssl_certfile</strong>: <code class="docutils literal notranslate"><span class="pre">cert.pem</span></code></p>
<ul>
<li><p>Path to the SSL certificate file.</p></li>
</ul>
</li>
</ul>
</section>
<section id="logging-and-resource-paths">
<h4>Logging and Resource Paths<a class="headerlink" href="#logging-and-resource-paths" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>log_path_base</strong>: <code class="docutils literal notranslate"><span class="pre">logs</span></code></p>
<ul>
<li><p>Base directory for log files.</p></li>
</ul>
</li>
<li><p><strong>log_file_backend</strong>: <code class="docutils literal notranslate"><span class="pre">logBackend.log</span></code></p>
<ul>
<li><p>Log file for backend logs.</p></li>
</ul>
</li>
<li><p><strong>log_file_minio</strong>: <code class="docutils literal notranslate"><span class="pre">logMinio.log</span></code></p>
<ul>
<li><p>Log file for MinIO logs.</p></li>
</ul>
</li>
<li><p><strong>icon_path</strong>: <code class="docutils literal notranslate"><span class="pre">resources/t3dbackend.ico</span></code></p>
<ul>
<li><p>Path to the application icon.</p></li>
</ul>
</li>
</ul>
</section>
<section id="packaging">
<h4>Packaging<a class="headerlink" href="#packaging" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p><strong>portable_package</strong>: <code class="docutils literal notranslate"><span class="pre">false</span></code></p>
<ul>
<li><p>Specifies whether the package is portable.</p></li>
</ul>
</li>
</ul>
</section>
<hr class="docutils" />
<section id="notes">
<h4>Notes<a class="headerlink" href="#notes" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Ensure all paths and URLs are correctly set before running the application.</p></li>
<li><p>Adjust CUDA settings based on hardware capabilities.</p></li>
<li><p>Logging paths should be accessible by the application to prevent errors.</p></li>
<li><p>MinIO settings must align with whether it is run locally or through an external S3 service.</p></li>
</ul>
<ol class="arabic" start="2">
<li><p>To run the server, run the following command in the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>compox<span class="w"> </span>-c<span class="w"> </span>config.yaml
</pre></div>
</div>
<ul class="simple">
<li><p>The server will be running on localhost and the port defined in the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file.</p></li>
</ul>
</li>
<li><p>If everything went right, the app should be running, currently with no algorithms registered. You should have an icon on your systray if you enabled the systray option and if you to <code class="docutils literal notranslate"><span class="pre">http://localhost:port_number</span></code> (or <code class="docutils literal notranslate"><span class="pre">https://localhost:port_number</span></code> if ssl is used), you will see the FastAPI welcome message.</p></li>
<li><p>If you go to <code class="docutils literal notranslate"><span class="pre">http://localhost:port_number/docs</span></code> (or <code class="docutils literal notranslate"><span class="pre">https://localhost:port_number/docs</span></code> if ssl is used), you will see the Swagger UI with the API documentation.</p></li>
</ol>
</section>
</section>
<section id="deploying-algorithms-to-the-server">
<h3>Deploying algorithms to the server<a class="headerlink" href="#deploying-algorithms-to-the-server" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>The algorithms provided in the <code class="docutils literal notranslate"><span class="pre">algorithms</span></code> directory require some additional files to be downloaded from our NextCloud server. These files are defined in the <code class="docutils literal notranslate"><span class="pre">algorithms/assets.yaml</span></code> file. To download the files, run the following command in the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>get_algorithm_files_from_nc<span class="w"> </span>nc_username<span class="w"> </span>nc_password
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <em>nc_username</em> and <em>nc_password</em> with the ML-user credentials for the NextCloud server (see our wiki for the credentials: https://gitlab.t3d.team/dl/cnn-training/-/wikis/Datasets/Data-management-and-processes).</p></li>
</ul>
</li>
<li><p>After the files are downloaded, you can deploy the algorithms running the following command in the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory. The deployment script will launch its own server instance and register the algorithms.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>deployment
</pre></div>
</div>
<ul class="simple">
<li><p>The algorithms should now be registered and ready to be run.</p></li>
</ul>
</li>
<li><p>You can also deploy only a specific algorithm from the <code class="docutils literal notranslate"><span class="pre">algorithms</span></code> directory by running the following command in the <code class="docutils literal notranslate"><span class="pre">compox</span></code> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>deployment<span class="w"> </span>algorithm_name
</pre></div>
</div>
<ul class="simple">
<li><p>Replace <em>algorithm_name</em> with the name of the algorithm you want to deploy.</p></li>
</ul>
</li>
<li><p>Another way to deploy an algorithm compatible with the t3dserver is by using the t3dserver systray icon. You can do this by right-clicking on the icon and selecting the <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">algorithm</span></code> option. You will be prompted to select the algorithm directory.</p></li>
</ol>
</section>
<section id="developing-custom-algorithms">
<h3>Developing custom algorithms<a class="headerlink" href="#developing-custom-algorithms" title="Link to this heading"></a></h3>
<p>To develop custom algorithms, checkout the <code class="docutils literal notranslate"><span class="pre">Algorithms</span></code> section either by going to the README.md file in the <code class="docutils literal notranslate"><span class="pre">algorithms</span></code> directory or by going to the <code class="docutils literal notranslate"><span class="pre">Algorithms</span></code> section of the documentation.</p>
</section>
<section id="running-tests-and-demo-app">
<h3>Running tests and demo app<a class="headerlink" href="#running-tests-and-demo-app" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p>After registration, you can run tests by running the following command in the <em>compox</em> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--compox_url<span class="w"> </span><span class="s2">&quot;server_url&quot;</span>
</pre></div>
</div>
<p>This command will run the tests against an existing server instance. Replace <em>server_url</em> with the URL of the server instance you want to test.</p>
<p>Or you can run the tests against a dynamically created server instance by running the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>tests<span class="w"> </span>--compox_config_path<span class="w"> </span><span class="s2">&quot;config.yaml&quot;</span>
</pre></div>
</div>
<p>Replace <em>config.yaml</em> with the path to the configuration file you want to use for tested server instance. Algorithms necessary for the tests will be deployed automatically.</p>
</li>
<li><p>You can launch a simple Streamlit demo app by running the following command in the <em>compox</em> directory:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>run<span class="w"> </span>run_demo_app
</pre></div>
</div>
<ul class="simple">
<li><p>The demo app will be running on <em>http://localhost:8501</em>.</p></li>
</ul>
</li>
</ol>
</section>
</section>
</section>
<section id="algorithms">
<h1>Algorithms<a class="headerlink" href="#algorithms" title="Link to this heading"></a></h1>
<section id="how-to-create-an-algorithm-module">
<h2>How to create an algorithm module<a class="headerlink" href="#how-to-create-an-algorithm-module" title="Link to this heading"></a></h2>
<p>In the following sections, we will describe how to create an algorithm module for the computing backend. The algorithm module is a Python package that contains the algorithm code. The algorithm module should be structured in a specific way in order to work properly with the computing backend.</p>
<p>The algorithm should be structured as follows:</p>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>algorithm_name/
     __init__.py
     Runner.py
     pyproject.toml
     files/
         file1
         file2
     some_internal_submodule/
         __init__.py
         module1.py
         module2.py

</pre></div>
</div>
<section id="the-runner-py-file">
<h3>The Runner.py file<a class="headerlink" href="#the-runner-py-file" title="Link to this heading"></a></h3>
<p>The Runner.py file is a mandatory component of the algorithm module. It serves as the entry point for the python computing backend to run the algorithm. It must define a class named Runner. The Runner class should inherit either from the BaseRunner class, or a Runner class specific to the algorithm type (see more in the algorithm types section). The Runner classes can be imported from the compox.algorithm_utils module. There are several mandatory methods that the Runner class must implement in order to work properly. The Runner class can also implement additional methods and functions that are not mandatory. But these can also be included as a submodule in the algorithm directory.</p>
<section id="algorithm-types">
<h4>Algorithm types<a class="headerlink" href="#algorithm-types" title="Link to this heading"></a></h4>
<p>There are several types of algorithms that can be implemented in the computing backend. The main difference between the algorithm types is in the way input and output data is handled. The algorihtm type is defined in the algorithms <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file and the class, from which the Runner class should inherit. An example of algorithm type is e.g. and Image2Image algorithm, which receives an image as input and returns an image as output. The pyproject.toml file should thus contain the following line:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Image2Image&quot;</span>
</pre></div>
</div>
<p>Furthermore the algotihms Runner class should inherit from the Image2ImageRunner class, which is imported from the compox.algorithm_utils module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">compox.algorithm_utils.Image2ImageRunner</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image2ImageRunner</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Runner</span><span class="p">(</span><span class="n">Image2ImageRunner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The runner class for the denoiser algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The denoising runner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<p>The following algorithm types are currently supported:</p>
<ul class="simple">
<li><p>Image2Image: The algorithm receives an image as input and returns an image as output.</p></li>
<li><p>Image2Embedding: The algorithm receives an image as input and returns a deep learning embedding as output.</p></li>
<li><p>Image2Segmentation: The algorithm receives an image as input and returns a segmentation mask as output.</p></li>
<li><p>Image2Alignment: The algorithm receives two images as input and returns an alignment transformation matrix as output.</p></li>
</ul>
<p>If the algorithm does not fit into any of the above categories, the Runner class can either inherit from the BaseRunner class, and the data schemas can be defined manually (more on that in the next section), or a new algorithm type can be defined in the compox.algorithm_utils module.</p>
</section>
<section id="algorithm-tags">
<h4>Algorithm tags<a class="headerlink" href="#algorithm-tags" title="Link to this heading"></a></h4>
<p>The algorithm tags are a useful tool to categorize the algorithms for the users in the frontend application. Each algorithm type has a set of predefined tags, which are used to categorize the algorithms. This is important, because when several algorithms are tagged by a specific tag, the frontend developer can then operate with the assumption, that the algorithms with the same tag have the same input and output data schemas. The tags are defined in the <code class="docutils literal notranslate"><span class="pre">compox/src/compox/algorithm_utils/algorithm_tags.yaml</span></code> file. This file can be edited by the developer to add new tags or modify the existing ones.</p>
</section>
<section id="the-preprocess-inference-and-postprocess-methods">
<h4>The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code>, <code class="docutils literal notranslate"><span class="pre">inference</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> methods<a class="headerlink" href="#the-preprocess-inference-and-postprocess-methods" title="Link to this heading"></a></h4>
<p>The methods are <code class="docutils literal notranslate"><span class="pre">preprocess</span></code>, <code class="docutils literal notranslate"><span class="pre">inference</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code>. In general it does not matter which part of the algorithm is implemented in which method, because the run method will call them sequentially in the order they are listed above. The separation is mostly for readability and maintainability.</p>
<p>Each of the methods must have exactly two inputs. The first input is some data that is passed between the methods (except for the preprocess method, which receives the input data identifiers defined by the user). The second input is a dictionary of arguments that the user has passed to the algorithm.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> method in general should serve for fetching the data using the <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method, processing the data and returning the result. The preprocess method will receive the input_data and args as arguments. The first input is a dictionary currently containing only one key: <code class="docutils literal notranslate"><span class="pre">input_dataset_ids</span></code>. The value of the <code class="docutils literal notranslate"><span class="pre">input_dataset_ids</span></code> key is a list of dataset ids. The args is a dictionary containing the arguments that the user has passed to the algorithm. The output of the preprocess method does not have a set format, but it will be passed to the inference method, so it must be compatible with the inference method. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> method should serve for running the actual algorithm on the data. The input of the inference method is the output of the preprocess method and the output is the result of the algorithms inference phase. The <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> method should postprocess the result of the algorithm and pass it to the <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method. The output of the postprocess method is a list strings, where each string is a dataset identifier of the posted data. This list will be returned to the user, who can then use these dataset identifiers to fetch the posted data from the database.</p>
</section>
<section id="the-fetch-data-method-for-baserunner">
<h4>The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method for BaseRunner<a class="headerlink" href="#the-fetch-data-method-for-baserunner" title="Link to this heading"></a></h4>
<p>Because the preprocess does not directly receive any data, only the data identifiers, the Runner class can use the <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method to retrieve the data from the database. The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method receives a list of dataset identifiers and a pydantic model as arguments. The pydantic model is used to validate the fetched data. The output of the <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method is a list of dictionaries, where each dictionary contains the data of one dataset.</p>
<p>Example of fetching data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">embeddings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="n">input_data</span><span class="p">[</span><span class="s2">&quot;input_dataset_ids&quot;</span><span class="p">],</span> <span class="n">EmbeddingSchema</span><span class="p">)</span>
</pre></div>
</div>
<p>The EmbeddingSchema is a pydantic model that is used to validate the fetched data. The pydantic schemas are defined in the fastapi/app/algorithms/io_schemas.py file. The EmbeddingSchema is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">EmbeddingSchema</span><span class="p">(</span><span class="n">DataSchema</span><span class="p">):</span>
    <span class="n">features</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
    <span class="n">input_size</span><span class="p">:</span> <span class="nb">tuple</span>
    <span class="n">original_size</span><span class="p">:</span> <span class="nb">tuple</span>
</pre></div>
</div>
</section>
<section id="the-fetch-data-method-for-specific-algorithm-types">
<h4>The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method for specific algorithm types<a class="headerlink" href="#the-fetch-data-method-for-specific-algorithm-types" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> for Runners inherited from specific algorithm types is a bit different. The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method does not accept a pydantic model as an argument, because the data schemas are predefined for each algorithm type. The <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method receives a list of dataset identifiers as an argument. The output of the <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method is a list of dictionaries, where each dictionary contains the data of one dataset.</p>
<p>Example of fetching data with a Runner inherited from the Image2ImageRunner class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">input_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="n">input_data</span><span class="p">[</span><span class="s2">&quot;input_dataset_ids&quot;</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="the-post-data-method-for-baserunner">
<h4>The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method for BaseRunner<a class="headerlink" href="#the-post-data-method-for-baserunner" title="Link to this heading"></a></h4>
<p>After the computation is done, the Runner class can use the <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method of the class to post the result of the computation to the database. The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method receives the result of the computation and a pydantic model as arguments. The result is expected to be a list of dictionaries, where each dictionary contains the data of one dataset. The pydantic model is used to validate the result before posting it to the database. Output of the <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method is a list of dataset identifiers of the posted data.</p>
<p>Example of posting data:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">output_dataset_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_data</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">MaskSchema</span><span class="p">)</span>
</pre></div>
</div>
<p>The output is a list of dictionaries, where each dictionary contains the data of one dataset. The MaskSchema is a pydantic model that is used to validate the posted data. The MaskSchema is defined as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MaskSchema</span><span class="p">(</span><span class="n">DataSchema</span><span class="p">):</span>
    <span class="n">mask</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
</pre></div>
</div>
</section>
<section id="the-post-data-method-for-specific-algorithm-types">
<h4>The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method for specific algorithm types<a class="headerlink" href="#the-post-data-method-for-specific-algorithm-types" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method for Runners inherited from specific algorithm types follows the same pattern as the <code class="docutils literal notranslate"><span class="pre">fetch_data</span></code> method. The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method does not accept a pydantic model as an argument, because the data schemas are predefined for each algorithm type. The <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method receives the result of the computation as an argument. The result is expected to be a list of dictionaries, where each dictionary contains the data of one dataset. The output of the <code class="docutils literal notranslate"><span class="pre">post_data</span></code> method is a list of dataset identifiers of the posted data.</p>
<p>Example of posting data with a Runner inherited from the Image2ImageRunner class:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">output_dataset_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_data</span><span class="p">(</span><span class="n">output</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-load-assets-method">
<h4>The <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method<a class="headerlink" href="#the-load-assets-method" title="Link to this heading"></a></h4>
<p>Is expected that the Runner class will work with a machine learning model. Because loading of model weights can be time consuming, the BaseRunner gives the developer an option to implement the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method. The <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method is called during the instantiation of the Runner class in the computing backend and the attributes set in the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> will get cached together with the Runner instance. This will make repeated calls to the Runner class faster, because the model weights will not have to be loaded again as long as the cache is not invalidated.</p>
<p>Any file present in the algorithm directory can be loaded in the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method (other than .py files). The <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> should receive a relative path to the file that should be loaded as an argument. A bytes object will be returned, which can be loaded e.g. using the the torch.load method in the case of PyTorch state dicts.</p>
<p>Example of loading a PyTorch state dict:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">state_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_asset</span><span class="p">(</span><span class="s2">&quot;files/vit_b.pt&quot;</span><span class="p">)</span>
<span class="n">state_dict</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">state_dict</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-log-message-method">
<h4>The <code class="docutils literal notranslate"><span class="pre">log_message</span></code> method<a class="headerlink" href="#the-log-message-method" title="Link to this heading"></a></h4>
<p>The log_message method can be used to log messages to the computing backend. The log_message method receives a message and a logging level as arguments. The logging level can be one of the following: DEBUG, INFO, WARNING, ERROR. The default logging level is INFO.</p>
<p>Example of logging a message:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;This is an info message.&quot;</span><span class="p">,</span> <span class="n">logging_level</span><span class="o">=</span><span class="s2">&quot;INFO&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-set-progress-method">
<h4>The <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method<a class="headerlink" href="#the-set-progress-method" title="Link to this heading"></a></h4>
<p>The set_progress method can be used to report the progress of the algorithm to the computing backend. The set_progress method receives a float value between 0 and 1 as an argument. The starting progress is automatically set to 0 and if the computation is done, or fails, the progress is automatically set to 1.</p>
<p>Example of reporting the progress:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="the-pyproject-toml-file">
<h3>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file<a class="headerlink" href="#the-pyproject-toml-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a file that contains the algorithm metadata. This file is used by the t3dserver to properly deploy the algorithm as a service. The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file should be placed in the root directory of the algorithm.</p>
<section id="mandatory-fields">
<h4>Mandatory fields<a class="headerlink" href="#mandatory-fields" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file should contain the following fields mandatory fields:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;algorithm_name&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;major.minor.patch&quot;</span>
</pre></div>
</div>
<p>Even though the following fields are not mandatory, it is recommended to include them in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file to make the algorithm as user-friendly and compatible with the t3dserver as possible.</p>
<p>The algorithm type should be specified in the <code class="docutils literal notranslate"><span class="pre">tool.t3dserver</span></code> section. The algorithm type is used to specify the general algorithm functionality. The algorithm type is used to determine the input and output data schemas, and the general algorithm behavior. The algorithm type is defined in the compox.algorithm_utils module.</p>
</section>
<section id="algorithm-type-tags-and-description">
<h4>Algorithm type, tags, and description<a class="headerlink" href="#algorithm-type-tags-and-description" title="Link to this heading"></a></h4>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;AlgorithmType&quot;</span>
</pre></div>
</div>
<p>Each algorithm type has a set of potential tags, which are used to specify the general algorithm functionality. These tags can be found and modified in the <code class="docutils literal notranslate"><span class="pre">compox\algorithm_utils\algorithm_tags.yaml</span></code> file. Multiple tags can be provided for one algorithm. For image denoising algorithms, we will use the <code class="docutils literal notranslate"><span class="pre">image-denoising</span></code> tag.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tag1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tag2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;tag3&quot;</span><span class="p">,</span><span class="w"> </span><span class="err">...]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the algorithm.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This is a super cool algorithm that does super cool things.&quot;</span>
</pre></div>
</div>
</section>
<section id="algorithm-supported-devices">
<h4>Algorithm supported devices<a class="headerlink" href="#algorithm-supported-devices" title="Link to this heading"></a></h4>
<p>The server allows algorithms to be run on both CPU and GPU devices. The <code class="docutils literal notranslate"><span class="pre">supported_devices</span></code> field is used to specify which devices the algorithm supports. The <code class="docutils literal notranslate"><span class="pre">supported_devices</span></code> field should contain a list of strings, where each string specifies a device that the algorithm supports, [cpu], [gpu], or [cpu, gpu]. Additionally, a <code class="docutils literal notranslate"><span class="pre">default_device</span></code> field must be specified, which specifies the default device that the algorithm will run on. The <code class="docutils literal notranslate"><span class="pre">default_device</span></code> field should be a string, either cpu or gpu. Do not specify a <code class="docutils literal notranslate"><span class="pre">default_device</span></code> thats not included in the <code class="docutils literal notranslate"><span class="pre">supported_devices</span></code> list as this will cause a warning and the algorithm will run on the CPU by default.</p>
<p>This setting will cause the algorithm to run on the CPU by default, but the user can override this setting in the execution request and run the algorithm on the GPU.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">supported_devices</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;cpu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;gpu&quot;</span><span class="p">]</span>
<span class="n">default_device</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cpu&quot;</span>
</pre></div>
</div>
</section>
<section id="additional-parameters">
<h4>Additional parameters<a class="headerlink" href="#additional-parameters" title="Link to this heading"></a></h4>
<p>We can also specify additional parameters in the <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field. The <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field should contain a list of dictionaries, where each dictionary contains the parameter name, type, default value, and description. The <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field is optional, and can be omitted if the algorithm does not require any additional parameters.</p>
<p>Each additional parameter must contain the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: The description of the parameter. This field is used to describe the purpose of the parameter. It should be a short, human-readable description of the parameter that can be displayed by the client application as a tooltip or help text.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code>: The configuration of parameter <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">default</span></code>, and <code class="docutils literal notranslate"><span class="pre">adjustable</span></code>. The <code class="docutils literal notranslate"><span class="pre">type</span></code> field specifies the type of the parameter. The <code class="docutils literal notranslate"><span class="pre">default</span></code> field specifies the default value of the parameter. The <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> field specifies whether the parameter can be adjusted by the user. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the parameter can be adjusted by the user. If set to <code class="docutils literal notranslate"><span class="pre">false</span></code>, the parameter is to be specified from within the client application without exposing it to the user.</p></li>
</ul>
<p>The following parameter types and configuration fields are supported:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter type</p></th>
<th class="head"><p>Configuration fields</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>string</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>int</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>float</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>bool</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>int_range</p></td>
<td><p>type, default, min, max, step, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>float_range</p></td>
<td><p>type, default, min, max, step, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>string_enum</p></td>
<td><p>type, default, options, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>int_enum</p></td>
<td><p>type, default, options, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>float_enum</p></td>
<td><p>type, default, options, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>string_list</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>int_list</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-odd"><td><p>float_list</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
<tr class="row-even"><td><p>bool_list</p></td>
<td><p>type, default, adjustable</p></td>
</tr>
</tbody>
</table>
<p>Here you can see an example of how to define additional parameters in the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file:</p>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">string</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">additional_parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;some_string_parameter&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;This parameter strings.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;string&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">int</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_int_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This paramete ints.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;int&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">float</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_float_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter floats.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">bool</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_bool_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter bools.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;bool&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">int_range</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_int_range_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter ranges ints.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;int_range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">float_range</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_float_range_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter ranges floats.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float_range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">10.0</span><span class="p">,</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">string_enum</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_string_enum_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter enums strings.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;string_enum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;world&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">int_enum</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_int_enum_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter enums ints.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;int_enum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">44</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">float_enum</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_float_enum_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter enums floats.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float_enum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="mf">3.15</span><span class="p">,</span><span class="w"> </span><span class="mf">3.16</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">string_list</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_string_list_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter lists strings.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;string_list&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;world&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">int_list</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_int_list_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter lists ints.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;int_list&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">,</span><span class="w"> </span><span class="mi">44</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">float_list</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_float_list_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter lists floats.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float_list&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="mf">3.14</span><span class="p">,</span><span class="w"> </span><span class="mf">3.15</span><span class="p">,</span><span class="w"> </span><span class="mf">3.16</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
<p>To define an user-adjustable <code class="docutils literal notranslate"><span class="pre">bool_list</span></code> parameter, use the following configuration:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;some_bool_list_parameter&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This parameter lists bools.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;bool_list&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">},</span>
</pre></div>
</div>
</section>
<section id="other-fields">
<h4>Other fields<a class="headerlink" href="#other-fields" title="Link to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">check_importable</span></code> field is used to check if the algorithm can be imported. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will check if the algorithm can be imported before deploying it as a service. (NOTE: THIS CURRENTLY DOES NOT WORK).</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">check_importable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">obfuscate</span></code> field is used to obfuscate the algorithm code. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will obfuscate the algorithm code before deploying it as a service. The obfuscation is currently implemented as minimization of the code. It is recommended to set this field to <code class="docutils literal notranslate"><span class="pre">true</span></code> to reasonably protect the algorithm code.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">obfuscate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">hash_module</span></code> and <code class="docutils literal notranslate"><span class="pre">hash_assets</span></code> fields to check if the algorithm module or assets have already been deployed. If they have been deployed, the t3dserver will not redeploy them, but reuse them for the current algorithm deployment. This can reduce the deployment time and the amount of data that needs to be stored.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">hash_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
</section>
<section id="the-files-directory">
<h3>The <code class="docutils literal notranslate"><span class="pre">files</span></code> directory<a class="headerlink" href="#the-files-directory" title="Link to this heading"></a></h3>
<p>The files directory is an optional component of the algorithm module. It should contain any files that the algorithm needs to run. The files directory can contain any type of file, such as images, text files, etc. The files directory can be accessed by calling the <code class="docutils literal notranslate"><span class="pre">self.fetch_asset</span></code> method from anywhere in the Runner class. The <code class="docutils literal notranslate"><span class="pre">fetch_asset</span></code> method receives a relative path to the file that should be fetched as an argument. A bytes object will be returned, which can be used to load the file.</p>
</section>
<section id="the-some-internal-submodule-directory">
<h3>The <code class="docutils literal notranslate"><span class="pre">some_internal_submodule</span></code> directory<a class="headerlink" href="#the-some-internal-submodule-directory" title="Link to this heading"></a></h3>
<p>The some_internal_submodule directory is an optional component of the algorithm module. It should contain any internal submodules that the algorithm needs to run. The some_internal_submodule directory can contain any number of Python files. The some_internal_submodule directory can be accessed by importing the submodule from the Runner class. Note that the submodule will be deployed together with the algorithm, so it should not contain any sensitive information (even though the submodule is not accessible from the outside and there is an option to obfuscate the code).</p>
</section>
</section>
<section id="example-of-a-dummy-algorithm">
<h2>Example of a dummy algorithm<a class="headerlink" href="#example-of-a-dummy-algorithm" title="Link to this heading"></a></h2>
<p>The file structure should look like this (this is just an untested example):</p>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>algorithm_name/
     __init__.py
     Runner.py
     pyproject.toml
     files/
         some_heavy_model.pt
     my_big_model/
         __init__.py
         utils.py
</pre></div>
</div>
<p>The Runner.py file should look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">my_big_model.utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">MyBigModel</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">algorithms.BaseRunner</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseRunner</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">algorithms.io_schemas</span><span class="w"> </span><span class="kn">import</span> <span class="n">MyDataSchema</span><span class="p">,</span> <span class="n">MyOutputSchema</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Runner</span><span class="p">(</span><span class="n">BaseRunner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The runner class for the foo algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The foo runner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">load_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The assets to load for the foo algorithm.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">some_model</span> <span class="o">=</span> <span class="n">MyBigModel</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Loading the Foo assets.&quot;</span><span class="p">)</span>
        <span class="n">some_big_state_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_asset</span><span class="p">(</span><span class="s2">&quot;files/some_heavy_model.pt&quot;</span><span class="p">)</span><span class="err"></span>
        <span class="n">some_big_state_dict</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">some_big_state_dict</span><span class="p">)</span>
        <span class="n">some_model</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">some_big_state_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">my_big_model</span> <span class="o">=</span> <span class="n">some_model</span>


    <span class="k">def</span><span class="w"> </span><span class="nf">preprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Preprocess the request data before feeding into model for inference.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        input_data : ImageSchema</span>
<span class="sd">            The input data.</span>
<span class="sd">        args : dict, optional</span>
<span class="sd">            The arguments, by default None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        tuple</span>
<span class="sd">            The preprocessed data.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Preprocessing the Foo input data.&quot;</span><span class="p">)</span>
        <span class="n">my_data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_data</span><span class="p">(</span><span class="n">input_data</span><span class="p">[</span><span class="s2">&quot;input_dataset_ids&quot;</span><span class="p">],</span> <span class="n">MyDataSchema</span><span class="p">)</span>
        <span class="n">input_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">my_data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">input_data</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">inference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>  <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the inference on the preprocessed data.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        data : np.ndarray</span>
<span class="sd">            The preprocessed data.</span>
<span class="sd">        args : dict, optional</span>
<span class="sd">            The arguments, by default None</span>


<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        torch.tensor</span>
<span class="sd">            The inference output.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Running the Foo inference.&quot;</span><span class="p">)</span>

        <span class="n">some_user_defined_args</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;some_user_defined_args&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">some_user_defined_args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;User defined args: </span><span class="si">{</span><span class="n">some_user_defined_args</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_big_model</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="n">some_user_defined_args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;The Foo inference is done.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">postprocess</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inference_output</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">tensor</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Postprocess the inference output.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        inference_output : dict</span>
<span class="sd">            The inference output.</span>
<span class="sd">        args : dict, optional</span>
<span class="sd">            The arguments, by default None</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        list[str]</span>
<span class="sd">            The output dataset ids.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Postprocessing the Foo output.&quot;</span><span class="p">)</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">inference_output</span><span class="o">.</span><span class="n">detach</span><span class="p">()</span><span class="o">.</span><span class="n">numpy</span><span class="p">()</span>
        <span class="n">output</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="n">output</span>
            <span class="p">}</span>
        <span class="p">]</span>
        <span class="n">output_dataset_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">post_data</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">MyOutputSchema</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output_dataset_ids</span>
</pre></div>
</div>
<p>The pyproject.toml file should look like this:</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;0.1.0&quot;</span>

<span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Generic&quot;</span>
<span class="n">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;bar&quot;</span><span class="p">]</span>
<span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;This algorithm does foo and bar.&quot;</span>
<span class="n">additional_parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;some_user_defined_args&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;str&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;This is a user defined argument.&quot;</span><span class="p">},</span>
<span class="p">]</span>
<span class="n">check_importable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">obfuscate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
<section id="a-general-template-for-creating-a-denoising-algorithm">
<h2>A general template for creating a denoising algorithm<a class="headerlink" href="#a-general-template-for-creating-a-denoising-algorithm" title="Link to this heading"></a></h2>
<p>Here a working template for developing a denoising algorithm will be presented. This guide will cover the specifics needed to develop an image denoising algorithm. To see how the t3dserver algorithm should generally be structured, please refer to the algorithms/readme.md file.</p>
<p>The algorithm folder is structured as follows:</p>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>template_denoising_algorithm/
     __init__.py
     Runner.py
     pyproject.toml
     image_denoising/
         __init__.py
         denoising_utils.py
     README.md
</pre></div>
</div>
<section id="the-pyproject-toml-file">
<h3>The pyproject.toml file<a class="headerlink" href="#the-pyproject-toml-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a file that contains the algorithm metadata. This file is used by the t3dserver to properly deploy the algorithm as a service. The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file should be placed in the root directory of the algorithm.</p>
<p>First, lets create the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. Under the [project] section, you should provide the name and version of the algorithm. The name should be unique and should not contain any spaces. The version should be in the format <code class="docutils literal notranslate"><span class="pre">major.minor.patch</span></code>. The algorithm name and versions is used to identify the algorithm in the t3dserver so it is important to provide a unique name and version.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;template_denosing_algorithm&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
</pre></div>
</div>
<p>Next, you should fill out the [tool.t3dserver] section. This section contains the metadata that the t3dserver uses to deploy the algorithm as a service. <code class="docutils literal notranslate"><span class="pre">algorithm_type</span></code> defines the algorithm input and output types, you may either use some predefined algorithm types or define your own. The predefined algorithm types are located in <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code>. For an image denoising algorithm, we will use the the <code class="docutils literal notranslate"><span class="pre">Image2Image</span></code> type. This type is suitable for image denoising as both our input and output is an image (or a sequence of images).</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Image2Image&quot;</span>
</pre></div>
</div>
<p>Each algorithm type has a set of potential tags, which are used to specify the general algorithm functionality. These tags can be found and modified in the <code class="docutils literal notranslate"><span class="pre">compox\algorithm_utils\algorithm_tags.yaml</span></code> file. Mutliple tags can be provided for one algorithm. For image denoising algorithms, we will use the <code class="docutils literal notranslate"><span class="pre">image-denoising</span></code> tag.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;image-denoising&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the algorithm.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Denoises a sequence of images using the total variation denoising algorithm.&quot;</span>
</pre></div>
</div>
<p>We can also specify additional parameters in the <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field. The <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field should contain a list of dictionaries, where each dictionary represents an additional parameter. Each parameter should have a <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">description</span></code> and <code class="docutils literal notranslate"><span class="pre">config</span></code> field. The <code class="docutils literal notranslate"><span class="pre">name</span></code> field should contain the name of the parameter. The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the parameter. The <code class="docutils literal notranslate"><span class="pre">config</span></code> field should contain a dictionary with the following fields: <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">default</span></code>, <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> and type-specific fields. To see more information about the possible parameter types see the <code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">an</span> <span class="pre">algorithm</span> <span class="pre">module</span></code> section.</p>
<p>For the denoising algorithm, we will add a <code class="docutils literal notranslate"><span class="pre">denoising_weight</span></code> parameter that will control the denoising strength. Because we want to set a range for the denoising weight, we will use the <code class="docutils literal notranslate"><span class="pre">float_range</span></code> parameter type. The <code class="docutils literal notranslate"><span class="pre">default</span></code> field should contain the default value of the parameter. The <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> fields should contain the minimum and maximum values of the parameter. The <code class="docutils literal notranslate"><span class="pre">step</span></code> field should contain the step size of the parameter. The <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> field should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if the parameter should be exposed to the user to adjust.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">additional_parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;denoising_weight&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;The weight of the denoising term between 0 and 1. Higher values will result in more denoising, but can distort the image.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float_range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">check_importable</span></code> field is used to check if the algorithm can be imported. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will check if the algorithm can be imported before deploying it as a service. (NOTE: THIS CURRENTLY DOES NOT WORK).</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">check_importable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">obfuscate</span></code> field is used to obfuscate the algorithm code. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will obfuscate the algorithm code before deploying it as a service. The obfuscation is currently implemented as minimization of the code. It is recommended to set this field to <code class="docutils literal notranslate"><span class="pre">true</span></code> to reasonably protect the algorithm code.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">obfuscate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">hash_module</span></code> and <code class="docutils literal notranslate"><span class="pre">hash_assets</span></code> fields to check if the algorithm module or assets have already been deployed. If they have been deployed, the t3dserver will not redeploy them, but reuse them for the current algorithm deployment. This can reduce the deployment time and the amount of data that needs to be stored.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">hash_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
<section id="the-algorithm-dependencies">
<h3>The algorithm dependencies<a class="headerlink" href="#the-algorithm-dependencies" title="Link to this heading"></a></h3>
<p>The algorithm can use any libraries from the global t3dserver environment. Additional dependencies can be provided as python submodules. Here we will use the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> library to handle the image data. We also implemented a simple <code class="docutils literal notranslate"><span class="pre">image_denoising</span></code> module that contains an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file and a <code class="docutils literal notranslate"><span class="pre">denosing_utils.py</span></code> file. The <code class="docutils literal notranslate"><span class="pre">denoising_utils.py</span></code> file contains the <code class="docutils literal notranslate"><span class="pre">denoise_image</span></code> function that performs the denoising of the images. The <code class="docutils literal notranslate"><span class="pre">image_denoising</span></code> module should be placed in the root directory of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">skimage.restoration</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">denoise_tv_chambolle</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">denoise_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">0.1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Denoise the image using the total variation denoising algorithm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : np.ndarray</span>
<span class="sd">        The image to denoise.</span>
<span class="sd">    weight: float</span>
<span class="sd">        The weight parameter for the denoising algorithm.</span>
<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The denoised image.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">denoise_tv_chambolle</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-runner-py-file">
<h3>The Runner.py file<a class="headerlink" href="#the-runner-py-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file is the main file of the algorithm. This file should contain the algorithm implementation. The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should be placed in the root directory of the algorithm.</p>
<p>Because we specified the algorithm type as <code class="docutils literal notranslate"><span class="pre">Image2Image</span></code>, the <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should contain a class that inherits from the <code class="docutils literal notranslate"><span class="pre">Image2ImageRunner</span></code> class. The <code class="docutils literal notranslate"><span class="pre">Image2ImageRunner</span></code> class is located in the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code> module. The <code class="docutils literal notranslate"><span class="pre">Image2ImageRunner</span></code> class contains the necessary methods to handle the input and output of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">compox.algorithm_utils.Image2ImageRunner</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image2ImageRunner</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Runner</span><span class="p">(</span><span class="n">Image2ImageRunner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The runner class for the denoiser algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The denoising runner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<p>We can implement a <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method to load any assets that the algorithm requires upon initilaization of the Runner. The important bit is that the attributes that are loaded in the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method are cached with the algorithm and do not have to be reloaded for each algorithm call. This can greatly speed up the algorithm execution. Since we do not need any assets for the denoising algorithm, we can leave the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method empty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Here you can load the assets needed for the algorithm. This can be</span>
<span class="sd">    the model, the weights, etc. The assets are loaded upon the first</span>
<span class="sd">    call of the algorithm and are cached with the algorithm instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Next, we can implement the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method, where we perform the denoising of the images. The data will be passed to the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method as a numpy array. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> method should return a numpy array with the denoised images of the same shape as the input images. You can use the <code class="docutils literal notranslate"><span class="pre">self.log_message</span></code> method to log messages to the t3dserver log. The <code class="docutils literal notranslate"><span class="pre">self.set_progress</span></code> method can be used to update the progress with a float value between 0 and 1.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">inference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the inference.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    input_data : dict</span>
<span class="sd">        The input data.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The denoised images.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Starting inference.&quot;</span><span class="p">)</span>
    <span class="c1"># now we retrieve the input data</span>
    <span class="c1"># we will min max normalize the images</span>
    <span class="n">min_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">images</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">max_val</span> <span class="o">-</span> <span class="n">min_val</span><span class="p">)</span>

    <span class="c1"># here we will get the optional argument of denoising weight</span>
    <span class="n">denosing_weight</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;denoising_weight&quot;</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>

    <span class="c1"># we can post messages to the log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Starting denoising of </span><span class="si">{</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> images with weight </span><span class="si">{</span><span class="n">denosing_weight</span><span class="si">}</span><span class="s2">.&quot;</span>
    <span class="p">)</span>

    <span class="c1"># we will denoise the images</span>
    <span class="n">denoised_images</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">images</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="n">denoised_images</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">denoise_image</span><span class="p">(</span>
            <span class="n">images</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="n">denosing_weight</span>
        <span class="p">)</span>
        <span class="c1"># this will update the progress bar</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">images</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="c1"># we will nromalize the output</span>
    <span class="n">denoised_images</span> <span class="o">=</span> <span class="p">(</span><span class="n">denoised_images</span> <span class="o">-</span> <span class="n">denoised_images</span><span class="o">.</span><span class="n">min</span><span class="p">())</span> <span class="o">/</span> <span class="p">(</span>
        <span class="n">denoised_images</span><span class="o">.</span><span class="n">max</span><span class="p">()</span> <span class="o">-</span> <span class="n">denoised_images</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
    <span class="p">)</span>
    <span class="n">denoised_images</span> <span class="o">=</span> <span class="n">denoised_images</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

    <span class="c1"># we will pass the denoised images to the postprocess method</span>
    <span class="k">return</span> <span class="n">denoised_images</span>

</pre></div>
</div>
<p>To customize the behavior of fetching and processing the input data, and postprocessing and uploading the output data, we can implement the <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> methods. The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> method is called before the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to fetch the input data. The <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> method is called after the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to process the output data. In our case, we will not implement any custom behavior for these methods. You can refer to the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils.Image2ImageRunner</span></code> class for more information about these methods.</p>
</section>
<section id="deploying-the-algorithm">
<h3>Deploying the algorithm<a class="headerlink" href="#deploying-the-algorithm" title="Link to this heading"></a></h3>
<p>To deploy the finished algorithm, you can use the <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span> <span class="pre">deployment</span> <span class="pre">template_denoising_algorithm</span></code> command. This command will deploy the algorithm to the t3dserver. The algorithm can also be added through the t3dserver systray interface by clicking the Add Algorithm button and selecting the algorithm directory.</p>
</section>
</section>
<section id="a-general-template-for-creating-a-segmentation-algorithm">
<h2>A general template for creating a segmentation algorithm<a class="headerlink" href="#a-general-template-for-creating-a-segmentation-algorithm" title="Link to this heading"></a></h2>
<p>This guide will cover the specifics needed to develop an image image segmentation algorithm. To see how the t3dserver algorithm should generally be structured, please refer to the algorithms/readme.md file.</p>
<p>The algorithm folder is structured as follows:</p>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>template_segmentation_algorithm/
     __init__.py
     Runner.py
     pyproject.toml
     image_segmentation/
         __init__.py
         segmentation_utils.py
     README.md
</pre></div>
</div>
<section id="the-pyproject-toml-file">
<h3>The pyproject.toml file<a class="headerlink" href="#the-pyproject-toml-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a file that contains the algorithm metadata. This file is used by the t3dserver to properly deploy the algorithm as a service. The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file should be placed in the root directory of the algorithm.</p>
<p>First, lets create the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. Under the [project] section, you should provide the name and version of the algorithm. The name should be unique and should not contain any spaces. The version should be in the format <code class="docutils literal notranslate"><span class="pre">major.minor.patch</span></code>. The algorithm name and versions is used to identify the algorithm in the t3dserver so it is important to provide a unique name and version.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;template_segmentation_algorithm&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
</pre></div>
</div>
<p>Next, we will fill out the [tool.t3dserver] section. This section contains the metadata that the t3dserver uses to deploy the algorithm as a service. <code class="docutils literal notranslate"><span class="pre">algorithm_type</span></code> defines the algorithm input and output types, you may either use some predefined algorithm types or define your own. The predefined algorithm types are located in <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code>. For an image segmentation algorithm, we will use the the <code class="docutils literal notranslate"><span class="pre">Image2Segmentation</span></code> type. This type is suitable for image segmentation as the input is a sequence of images and the output is a sequence of segmentation masks.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Image2Segmentation&quot;</span>
</pre></div>
</div>
<p>Each algorithm type has a set of potential tags, which are used to specify the general algorithm functionality. These tags can be found and modified in the <code class="docutils literal notranslate"><span class="pre">compox\algorithm_utils\algorithm_tags.yaml</span></code> file. Mutliple tags can be provided for one algorithm. For image segmentation algorithms, we will use the <code class="docutils literal notranslate"><span class="pre">image-segmentation</span></code> tag.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;image-segmenation&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the algorithm.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Performs a binary segmentation of a 3-D image using a skimage filter.&quot;</span>
</pre></div>
</div>
<p>We can also specify additional parameters in the <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field. The <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field should contain a list of dictionaries, where each dictionary represents an additional parameter. Each parameter should have a <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">description</span></code> and <code class="docutils literal notranslate"><span class="pre">config</span></code> field. The <code class="docutils literal notranslate"><span class="pre">name</span></code> field should contain the name of the parameter. The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the parameter, that should be concise and descriptive enough to show to the user as a tooltip or help text. The <code class="docutils literal notranslate"><span class="pre">config</span></code> field should contain a dictionary with the following fields: <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">default</span></code>, <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> and type-specific fields. To see more information about the possible parameter types see the <code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">an</span> <span class="pre">algorithm</span> <span class="pre">module</span></code> section.</p>
<p>Here we will add a <code class="docutils literal notranslate"><span class="pre">thresholding_algorithm</span></code> parameter that will allow the user to select the thresholding algorithm to use. The <code class="docutils literal notranslate"><span class="pre">type</span></code> field is set to <code class="docutils literal notranslate"><span class="pre">string_enum</span></code> to specify that the parameter is a string with a predefined set of values. The <code class="docutils literal notranslate"><span class="pre">default</span></code> field is set to <code class="docutils literal notranslate"><span class="pre">otsu</span></code> to specify the default value of the parameter. The <code class="docutils literal notranslate"><span class="pre">options</span></code> field is set to a list of strings that specify the possible values of the parameter. The <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> field is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to specify that the user should be able to select the thresholding algorithm to apply.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">additional_parameters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="n">name</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;thresholding_algorithm&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;The thresholding algorithm to use.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;string_enum&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;otsu&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">options</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;otsu&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;yen&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;li&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;minimum&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;mean&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;triangle&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;isodata&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;local&quot;</span><span class="p">],</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}},</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">check_importable</span></code> field is used to check if the algorithm can be imported. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will check if the algorithm can be imported before deploying it as a service. (NOTE: THIS CURRENTLY DOES NOT WORK).</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">check_importable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">obfuscate</span></code> field is used to obfuscate the algorithm code. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will obfuscate the algorithm code before deploying it as a service. The obfuscation is currently implemented as minimization of the code. It is recommended to set this field to <code class="docutils literal notranslate"><span class="pre">true</span></code> to reasonably protect the algorithm code.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">obfuscate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">hash_module</span></code> and <code class="docutils literal notranslate"><span class="pre">hash_assets</span></code> fields to check if the algorithm module or assets have already been deployed. If they have been deployed, the t3dserver will not redeploy them, but reuse them for the current algorithm deployment. This can reduce the deployment time and the amount of data that needs to be stored.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">hash_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
<section id="the-algorithm-dependencies">
<h3>The algorithm dependencies<a class="headerlink" href="#the-algorithm-dependencies" title="Link to this heading"></a></h3>
<p>The algorithm can use any libraries from the global t3dserver environment. Additional dependencies can be provided as python submodules. Here we will use the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> library to handle the image data. We also implemented a simple <code class="docutils literal notranslate"><span class="pre">image_segmentation</span></code> module that contains an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file and a <code class="docutils literal notranslate"><span class="pre">segmentation_utils.py</span></code> file. The <code class="docutils literal notranslate"><span class="pre">segmentation_utils.py</span></code> file contains the <code class="docutils literal notranslate"><span class="pre">threshold_image</span></code> function that performs segmentation of an image using a selected algorithm. The <code class="docutils literal notranslate"><span class="pre">image_segmentation</span></code> module should be placed in the root directory of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">skimage.filters</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">skif</span>


<span class="k">def</span><span class="w"> </span><span class="nf">threshold_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">thresholding_algorithm</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Threshold the image using the specified thresholding algorithm.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : np.ndarray</span>
<span class="sd">        The image to threshold.</span>
<span class="sd">    thresholding_algorithm : str</span>
<span class="sd">        The thresholding algorithm to use.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The thresholded image.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;otsu&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_otsu</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;yen&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_yen</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;li&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_li</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;minimum&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_minimum</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;mean&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_mean</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;triangle&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_triangle</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;isodata&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_isodata</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">thresholding_algorithm</span> <span class="o">==</span> <span class="s2">&quot;local&quot;</span><span class="p">:</span>
        <span class="n">threshold</span> <span class="o">=</span> <span class="n">skif</span><span class="o">.</span><span class="n">threshold_local</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid thresholding algorithm: </span><span class="si">{</span><span class="n">thresholding_algorithm</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">image</span> <span class="o">&gt;</span> <span class="n">threshold</span>
</pre></div>
</div>
</section>
<section id="the-runner-py-file">
<h3>The Runner.py file<a class="headerlink" href="#the-runner-py-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file is the main file of the algorithm. This file should contain the algorithm implementation. The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should be placed in the root directory of the algorithm.</p>
<p>Because we specified the algorithm type as <code class="docutils literal notranslate"><span class="pre">Image2Segmentation</span></code>, the <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should contain a class that inherits from the <code class="docutils literal notranslate"><span class="pre">Image2SegmentationRunner</span></code> class. The <code class="docutils literal notranslate"><span class="pre">Image2SegmentationRunner</span></code> class is located in the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code> module. The <code class="docutils literal notranslate"><span class="pre">Image2SegmentationRunner</span></code> class contains the necessary methods to handle the input and output of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">compox.algorithm_utils.Image2SegmentationRunner</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Image2SegmentationRunner</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">image_segmentation.segmentation_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">threshold_image</span>


<span class="k">class</span><span class="w"> </span><span class="nc">Runner</span><span class="p">(</span><span class="n">Image2SegmentationRunner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The runner class for the image segmentation algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The aligner runner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<p>We can implement a <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method to load any assets that the algorithm requires upon initilaization of the Runner. The important bit is that the attributes that are loaded in the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method are cached with the algorithm and do not have to be reloaded for each algorithm call. This can greatly speed up the algorithm execution. Since we do not need any assets for the segmentation algorithm, we can leave the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method empty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Here you can load the assets needed for the algorithm. This can be</span>
<span class="sd">    the model, the weights, etc. The assets are loaded upon the first</span>
<span class="sd">    call of the algorithm and are cached with the algorithm instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Next, we can implement the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method, where we perform the segmentation of the images. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> will receive a numpy array with the images to be segmented. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> method must return a numpy array with the segmentation masks of the same
shape as the input images. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> method can also receive a dictionary with the arguments for the algorithm. The arguments are passed to the algorithm from the t3dserver and can be used to customize the behavior of the algorithm. In our case, we will use the <code class="docutils literal notranslate"><span class="pre">thresholding_algorithm</span></code> argument to specify the thresholding algorithm to use.
You can also report the progress of the algorithm by calling the <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method. The <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method takes a float value between 0 and 1, where 0 is the start of the algorithm and 1 is the end of the algorithm. The <code class="docutils literal notranslate"><span class="pre">log_message</span></code> method can be used to log messages to the t3dserver log.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">inference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the inference.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : np.ndarray</span>
<span class="sd">        The images to be segmented.</span>
<span class="sd">    args : dict</span>
<span class="sd">        The arguments for the algorithm.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The segmented images.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># now we retrieve the input data</span>
    <span class="n">thresholding_algorithm</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;thresholding_algorithm&quot;</span><span class="p">,</span> <span class="s2">&quot;otsu&quot;</span><span class="p">)</span>
    <span class="c1"># we can post messages to the log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">&quot;Starting inference with thresholding algorithm: </span><span class="si">{</span><span class="n">thresholding_algorithm</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>

    <span class="c1"># here we will threshold the images</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">threshold_image</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">thresholding_algorithm</span><span class="p">)</span>

    <span class="c1"># we can also log progress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>

    <span class="c1"># pass the mask to the postprocess</span>
    <span class="k">return</span> <span class="n">mask</span>
</pre></div>
</div>
<p>To customize the behavior of fetching and processing the input data, and postprocessing and uploading the output data, we can implement the <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> methods. The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> method is called before the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to fetch the input data. The <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> method is called after the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to process the output data. In our case, we will not implement any custom behavior for these methods. You can refer to the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils.Image2SegmentationRunner</span></code> class for more information about these methods.</p>
</section>
<section id="deploying-the-algorithm">
<h3>Deploying the algorithm<a class="headerlink" href="#deploying-the-algorithm" title="Link to this heading"></a></h3>
<p>To deploy the finished algorithm, you can use the <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span> <span class="pre">deployment</span> <span class="pre">template_segmentation_algorithm</span></code> command. This command will deploy the algorithm to the t3dserver. The algorithm can also be added through the t3dserver systray interface by clicking the Add Algorithm button and selecting the algorithm directory.</p>
</section>
</section>
<section id="a-general-template-for-creating-a-segmentation-algorithm">
<h2>A general template for creating a segmentation algorithm<a class="headerlink" href="#a-general-template-for-creating-a-segmentation-algorithm" title="Link to this heading"></a></h2>
<p>Here a working template for developing an image registration algorithm will be presented. To see how the t3dserver algorithm should generally be structured, please refer to the algorithms/readme.md file.</p>
<p>The algorithm folder is structured as follows:</p>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>template_registration_algorithm/
     __init__.py
     Runner.py
     pyproject.toml
     image_registration/
         __init__.py
         registration_utils.py
     README.md
</pre></div>
</div>
<section id="the-pyproject-toml-file">
<h3>The pyproject.toml file<a class="headerlink" href="#the-pyproject-toml-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> is a file that contains the algorithm metadata. This file is used by the t3dserver to properly deploy the algorithm as a service. The <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file should be placed in the root directory of the algorithm.</p>
<p>First, lets create the <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> file. Under the [project] section, you should provide the name and version of the algorithm. The name should be unique and should not contain any spaces. The version should be in the format <code class="docutils literal notranslate"><span class="pre">major.minor.patch</span></code>. The algorithm name and versions is used to identify the algorithm in the t3dserver so it is important to provide a unique name and version.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[project]</span>
<span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;template_registration_algorithm&quot;</span>
<span class="n">version</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;1.0.0&quot;</span>
</pre></div>
</div>
<p>Next, we will fill out the [tool.t3dserver] section. This section contains the metadata that the t3dserver uses to deploy the algorithm as a service. <code class="docutils literal notranslate"><span class="pre">algorithm_type</span></code> defines the algorithm input and output types, you may either use some predefined algorithm types or define your own. The predefined algorithm types are located in <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code>. For an image registration algorithm, we will use the the <code class="docutils literal notranslate"><span class="pre">Image2Alignment</span></code> type. This type is suitable for image segmentation as the input is a sequence of images and the output is a sequence homography matrices.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="k">[tool.t3dserver]</span>
<span class="n">algorithm_type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Image2Alignment&quot;</span>
</pre></div>
</div>
<p>Each algorithm type has a set of potential tags, which are used to specify the general algorithm functionality. These tags can be found and modified in the <code class="docutils literal notranslate"><span class="pre">compox\algorithm_utils\algorithm_tags.yaml</span></code> file. Mutliple tags can be provided for one algorithm. For image registration algorithms, we will use the <code class="docutils literal notranslate"><span class="pre">image-alignment</span></code> tag.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">tags</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;image-alignment&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the algorithm.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Generates homography matrices for aligning a sequence of images.&quot;</span>
</pre></div>
</div>
<p>We can also specify additional parameters in the <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field. The <code class="docutils literal notranslate"><span class="pre">additional_parameters</span></code> field should contain a list of dictionaries, where each dictionary represents an additional parameter. Each parameter should have a <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">description</span></code> and <code class="docutils literal notranslate"><span class="pre">config</span></code> field. The <code class="docutils literal notranslate"><span class="pre">name</span></code> field should contain the name of the parameter. The <code class="docutils literal notranslate"><span class="pre">description</span></code> field should contain a brief description of the parameter, that should be concise and descriptive enough to show to the user as a tooltip or help text. The <code class="docutils literal notranslate"><span class="pre">config</span></code> field should contain a dictionary with the following fields: <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">default</span></code>, <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> and type-specific fields. To see more information about the possible parameter types see the <code class="docutils literal notranslate"><span class="pre">How</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">an</span> <span class="pre">algorithm</span> <span class="pre">module</span></code> section.</p>
<p>Here we will add a <code class="docutils literal notranslate"><span class="pre">max_translation</span></code> parameter that defines the maximum translation as a fraction of the image size. Because we want to set a range for the parameter, we will use the <code class="docutils literal notranslate"><span class="pre">float_range</span></code> type. The <code class="docutils literal notranslate"><span class="pre">default</span></code> field should contain the default value of the parameter. The <code class="docutils literal notranslate"><span class="pre">min</span></code> and <code class="docutils literal notranslate"><span class="pre">max</span></code> fields should contain the minimum and maximum values of the parameter. The <code class="docutils literal notranslate"><span class="pre">step</span></code> field should contain the step size of the parameter. The <code class="docutils literal notranslate"><span class="pre">adjustable</span></code> field should be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if we want to expose the parameter to the user to adjust.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="w"> </span><span class="err">{</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;max_translation&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Maximum translation as a fraction of the image size.&quot;</span><span class="err">,</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">type</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s2">&quot;float_range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">default</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">max</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="n">step</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mf">0.05</span><span class="p">,</span><span class="w"> </span><span class="n">adjustable</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="kc">true</span><span class="p">}</span><span class="err">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">check_importable</span></code> field is used to check if the algorithm can be imported. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will check if the algorithm can be imported before deploying it as a service. (NOTE: THIS CURRENTLY DOES NOT WORK).</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">check_importable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">obfuscate</span></code> field is used to obfuscate the algorithm code. If set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the t3dserver will obfuscate the algorithm code before deploying it as a service. The obfuscation is currently implemented as minimization of the code. It is recommended to set this field to <code class="docutils literal notranslate"><span class="pre">true</span></code> to reasonably protect the algorithm code.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">obfuscate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">hash_module</span></code> and <code class="docutils literal notranslate"><span class="pre">hash_assets</span></code> fields to check if the algorithm module or assets have already been deployed. If they have been deployed, the t3dserver will not redeploy them, but reuse them for the current algorithm deployment. This can reduce the deployment time and the amount of data that needs to be stored.</p>
<div class="highlight-toml notranslate"><div class="highlight"><pre><span></span><span class="n">hash_module</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="n">hash_assets</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</pre></div>
</div>
</section>
<section id="the-algorithm-dependencies">
<h3>The algorithm dependencies<a class="headerlink" href="#the-algorithm-dependencies" title="Link to this heading"></a></h3>
<p>The algorithm can use any libraries from the global t3dserver environment. Additional dependencies can be provided as python submodules. Here we will use the <code class="docutils literal notranslate"><span class="pre">numpy</span></code> library to handle the image data. We also implemented a simple <code class="docutils literal notranslate"><span class="pre">image_registration</span></code> module that contains an <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file and a <code class="docutils literal notranslate"><span class="pre">registration_utils.py</span></code> file. The <code class="docutils literal notranslate"><span class="pre">registration_utils.py</span></code> file contains the <code class="docutils literal notranslate"><span class="pre">get_random_translation</span></code> function that generates a random homography matrix with a maximum translation defined by the <code class="docutils literal notranslate"><span class="pre">max_translation</span></code> parameters as a fraction of the input image size. The <code class="docutils literal notranslate"><span class="pre">image_registration</span></code> module should be placed in the root directory of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_random_translation</span><span class="p">(</span><span class="n">image</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">max_translation</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">0.25</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a random translation matrix.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    image : np.ndarray</span>
<span class="sd">        The image.</span>
<span class="sd">    max_translation : float</span>
<span class="sd">        The maximum translation.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The translation matrix.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># get the image dimensions</span>
    <span class="n">height</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">eye</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="c1"># random translation</span>
    <span class="n">h</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span>
        <span class="o">-</span><span class="n">max_translation</span> <span class="o">*</span> <span class="n">width</span><span class="p">,</span> <span class="n">max_translation</span> <span class="o">*</span> <span class="n">width</span>
    <span class="p">)</span>
    <span class="n">h</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span>
        <span class="o">-</span><span class="n">max_translation</span> <span class="o">*</span> <span class="n">height</span><span class="p">,</span> <span class="n">max_translation</span> <span class="o">*</span> <span class="n">height</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">h</span>
</pre></div>
</div>
</section>
<section id="the-runner-py-file">
<h3>The Runner.py file<a class="headerlink" href="#the-runner-py-file" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file is the main file of the algorithm. This file should contain the algorithm implementation. The <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should be placed in the root directory of the algorithm.</p>
<p>Because we specified the algorithm type as <code class="docutils literal notranslate"><span class="pre">Image2Alignment</span></code>, the <code class="docutils literal notranslate"><span class="pre">Runner.py</span></code> file should contain a class that inherits from the <code class="docutils literal notranslate"><span class="pre">Image2AlignmentRunner</span></code> class. The <code class="docutils literal notranslate"><span class="pre">Image2AlignmentRunner</span></code> class is located in the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils</span></code> module. The <code class="docutils literal notranslate"><span class="pre">Image2AlignmentRunner</span></code> class contains the necessary methods to handle the input and output of the algorithm.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">compox.algorithm_utils.Image2AlignmentRunner</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">Image2AlignmentRunner</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">image_registration.registration_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_random_translation</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Runner</span><span class="p">(</span><span class="n">Image2AlignmentRunner</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The runner class for the denoiser algorithm.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;cpu&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The image registration runner.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">task_handler</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span>
</pre></div>
</div>
<p>We can implement a <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method to load any assets that the algorithm requires upon initilaization of the Runner. The important bit is that the attributes that are loaded in the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method are cached with the algorithm and do not have to be reloaded for each algorithm call. This can greatly speed up the algorithm execution. Since we do not need any assets for the image registration algorithm, we can leave the <code class="docutils literal notranslate"><span class="pre">load_assets</span></code> method empty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">load_assets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Here you can load the assets needed for the algorithm. This can be</span>
<span class="sd">    the model, the weights, etc. The assets are loaded upon the first</span>
<span class="sd">    call of the algorithm and are cached with the algorithm instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Next, we can implement the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method, where we perform the registration of the images. The data will be passed to the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method as a numpy array. The <code class="docutils literal notranslate"><span class="pre">inference</span></code> method return a list of homography matrices represented by numpy arrays. You can also report the progress of the algorithm by calling the <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method. The <code class="docutils literal notranslate"><span class="pre">set_progress</span></code> method takes a float value between 0 and 1, where 0 is the start of the algorithm and 1 is the end of the algorithm. The <code class="docutils literal notranslate"><span class="pre">log_message</span></code> method can be used to log messages to the t3dserver log.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">inference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Run the inference.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    data : np.ndarray</span>
<span class="sd">        The input images</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    list[np.ndarray]</span>
<span class="sd">        The output homography matrices.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="s2">&quot;Starting inference.&quot;</span><span class="p">)</span>
    <span class="c1"># now we retrieve the input data</span>
    <span class="n">max_translation</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_translation&quot;</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
    <span class="c1"># we can post messages to the log</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">log_message</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Registering </span><span class="si">{</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2"> images.&quot;</span><span class="p">)</span>

    <span class="c1"># we will denoise the images</span>
    <span class="n">matrices</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">matrix</span> <span class="o">=</span> <span class="n">get_random_translation</span><span class="p">(</span>
            <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">max_translation</span><span class="o">=</span><span class="n">max_translation</span>
        <span class="p">)</span>
        <span class="n">matrices</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_progress</span><span class="p">(</span><span class="n">i</span> <span class="o">/</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># we will pass the homography matrices to the output</span>
    <span class="k">return</span> <span class="n">matrices</span>
</pre></div>
</div>
<p>To customize the behavior of fetching and processing the input data, and postprocessing and uploading the output data, we can implement the <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> and <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> methods. The <code class="docutils literal notranslate"><span class="pre">preprocess</span></code> method is called before the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to fetch the input data. The <code class="docutils literal notranslate"><span class="pre">postprocess</span></code> method is called after the <code class="docutils literal notranslate"><span class="pre">inference</span></code> method and is used to process the output data. In our case, we will not implement any custom behavior for these methods. You can refer to the <code class="docutils literal notranslate"><span class="pre">compox.algorithm_utils.Image2AlignmentRunner</span></code> class for more information about these methods.</p>
</section>
<section id="deploying-the-algorithm">
<h3>Deploying the algorithm<a class="headerlink" href="#deploying-the-algorithm" title="Link to this heading"></a></h3>
<p>To deploy the finished algorithm, you can use the <code class="docutils literal notranslate"><span class="pre">pdm</span> <span class="pre">run</span> <span class="pre">deployment</span> <span class="pre">template_registration_algorithm</span></code> command. This command will deploy the algorithm to the t3dserver. The algorithm can also be added through the t3dserver systray interface by clicking the Add Algorithm button and selecting the algorithm directory.</p>
</section>
</section>
<p id="module-algorithm_utils.AlgorithmDeployer">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">algorithm_utils.AlgorithmDeployer.</span></span><span class="sig-name descname"><span class="pre">AlgorithmDeployer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algorithm_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer" title="Link to this definition"></a></dt>
<dd><p>The AlgorithmDeployer class is used to deploy an algorithm to the algorithm
store in the database. The algorithm directory gets automatically separated
into the algorithm module by detecting all .py files and zipping them as a
python module and storing them in the module-store collection. Files other than
.py files are stored as assets in the asset-store collection. The algorithm
metadata is stored in the algorithm-store collection as a json file. The json file
contains the algorithm name, major and minor version, the module id, the assets
dictionary and the timestamp of when the algorithm was stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>algortihm_directory</strong> (<em>str</em>)  The path to the algorithm directory.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.calculate_etag">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate_etag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.calculate_etag" title="Link to this definition"></a></dt>
<dd><p>Calculate the etag hash of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>bytes</em>)  The file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The etag hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.check_if_zip_is_importable">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_if_zip_is_importable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_zip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.check_if_zip_is_importable" title="Link to this definition"></a></dt>
<dd><p>Check if a a zipped module is importable.
:param path_to_zip: The path to the zip file.
:type path_to_zip: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the module is importable, False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_other_than_py_files">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_other_than_py_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_pycache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_gitignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_other_than_py_files" title="Link to this definition"></a></dt>
<dd><p>Find all the files in a directory other than .py files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>)  The directory to search.</p></li>
<li><p><strong>ignore_pycache</strong> (<em>bool</em><em>, </em><em>optional</em>)  Whether to ignore the __pycache__ directory. The default is True.</p></li>
<li><p><strong>ignore_gitignore</strong> (<em>bool</em><em>, </em><em>optional</em>)  Whether to ignore the .gitignore file. The default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of files other than .py files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_py_files">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_py_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_pycache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.find_py_files" title="Link to this definition"></a></dt>
<dd><p>Find all the .py files in a directory recursively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>)  The directory to search.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of .py files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.generate_uuid">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_uuid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.generate_uuid" title="Link to this definition"></a></dt>
<dd><p>Generate a uuid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em><em>, </em><em>optional</em>)  The version of the uuid. The default is 1.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The uuid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_directory">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_directory" title="Link to this definition"></a></dt>
<dd><p>Compute the md5 hash of a directory based on its contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>)  The path to the directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The md5 hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_py_file">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash_py_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.hash_py_file" title="Link to this definition"></a></dt>
<dd><p>Compute the md5 hash of a .py file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>str</em>)  The path to the file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The md5 hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.parse_pyproject_toml">
<span class="sig-name descname"><span class="pre">parse_pyproject_toml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_algorithm_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.parse_pyproject_toml" title="Link to this definition"></a></dt>
<dd><p>Parse the pyproject.toml file in the algorithm directory to get the
algorithm name, major version and minor version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_to_algorithm_directory</strong> (<em>str</em>)  The path to the algorithm directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The algorithm name, major version and minor version.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.process_path_to_dict_key">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_path_to_dict_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.process_path_to_dict_key" title="Link to this definition"></a></dt>
<dd><p>This method takes a path to a file specified as directory and substitutes
any backslashes and double backslashes with forward slashes. It also removes
the leading forward slash if it exists. This is necessary to store the
directory structure as a dictionary key which can then be accessed by the
server independently of the operating system, where the deployment is
performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>)  A path to a file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The processed path with forward slashes and without the leading forward
slash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.store_algorithm">
<span class="sig-name descname"><span class="pre">store_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">database_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separate_runner_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'algorithm-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'module-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'asset-store'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmDeployer.AlgorithmDeployer.store_algorithm" title="Link to this definition"></a></dt>
<dd><p>Store the algorithm to the algorithm store.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database_connection</strong> (<em>DatabaseConnection</em>)  The database connection object. Can be None if the algorithm is not
supposed to be stored in the database (e.g. for local testing and
development).</p></li>
<li><p><strong>separate_runner_path</strong> (<em>str</em><em>, </em><em>optional</em>)  The path to the runner file. Use this if the runner file is not in
the root of the algorithm directory. The default is None.</p></li>
<li><p><strong>algorithm_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the algorithm. The default is
algorithm-store.</p></li>
<li><p><strong>module_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the module. The default is
module-store.</p></li>
<li><p><strong>asset_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the assets. The default is
asset-store.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-algorithm_utils.AlgorithmManager">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmManager.AlgorithmManager">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">algorithm_utils.AlgorithmManager.</span></span><span class="sig-name descname"><span class="pre">AlgorithmManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">database_connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithms_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'algorithm-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'module-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">assets_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'asset-store'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.AlgorithmManager.AlgorithmManager" title="Link to this definition"></a></dt>
<dd><p>This class is responsible for managing the algorithms, modules and assets in
the database. It provides methods to list or delete algorithms, modules and assets.
To store the algorithms, modules and assets, use the AlgorithmDeployer class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database_connection</strong> (<a class="reference internal" href="#database_connection.BaseConnection.BaseConnection" title="database_connection.BaseConnection.BaseConnection"><em>BaseConnection</em></a>)  The database connection to use for the operations.</p></li>
<li><p><strong>algorithms_collection</strong> (<em>str</em>)  The name of the collection where the algorithms are stored.</p></li>
<li><p><strong>module_collection</strong> (<em>str</em>)  The name of the collection where the modules are stored.</p></li>
<li><p><strong>assets_collection</strong> (<em>str</em>)  The name of the collection where the assets are stored.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmManager.AlgorithmManager.delete_algorithms">
<span class="sig-name descname"><span class="pre">delete_algorithms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minor_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmManager.AlgorithmManager.delete_algorithms" title="Link to this definition"></a></dt>
<dd><p>Delete an algorithm and associated modules and assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>)  The name of the algorithm to delete.</p></li>
<li><p><strong>major_version</strong> (<em>str</em>)  The major version of the algorithm to delete.</p></li>
<li><p><strong>minor_version</strong> (<em>str</em>)  The minor version of the algorithm to delete.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.AlgorithmManager.AlgorithmManager.list_algorithms">
<span class="sig-name descname"><span class="pre">list_algorithms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">minor_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#algorithm_utils.AlgorithmManager.AlgorithmManager.list_algorithms" title="Link to this definition"></a></dt>
<dd><p>List all algorithms stored in the database. Optionally can filter by name,
major version or minor version.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>list</em>  The list of algorithms defined by their jsons</p></li>
<li><p><strong>name</strong> (<em>str, optional</em>)  Can be used to filter the algorithms by name.</p></li>
<li><p><strong>major_version</strong> (<em>str, optional</em>)  Can be used to filter the algorithms by major version.</p></li>
<li><p><strong>minor_version</strong> (<em>str, optional</em>)  Can be used to filter the algorithms by minor version.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-algorithm_utils.BaseRunner">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">algorithm_utils.BaseRunner.</span></span><span class="sig-name descname"><span class="pre">BaseRunner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_handler</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">TaskHandler</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner" title="Link to this definition"></a></dt>
<dd><p>Base class for all runners. Specifies the architecture of a runner and the
required methods.</p>
<p>When implementing a new runner, the following methods need to be implemented:
- preprocess: Preprocess the input data.
- inference: Run the inference on the output of the preprocessing.
- postprocess: Postprocess the output of the inference.</p>
<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.fetch_asset">
<span class="sig-name descname"><span class="pre">fetch_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bytes</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.fetch_asset" title="Link to this definition"></a></dt>
<dd><p>Fetches an asset as bytes from the database by its path relative to the
algorithm Runner class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>asset_path</strong> (<em>str</em>)  TThe path to the asset relative to the algorithm Runner class. e.g.
files/weights.pth</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The asset as bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bytes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.fetch_data">
<span class="sig-name descname"><span class="pre">fetch_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pydantic_data_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">DataSchema</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.fetch_data" title="Link to this definition"></a></dt>
<dd><p>Fetches the data from the database. A pydantic schema must be provided
to validate the data. The data is fetches as a list of dictionaries, where
each dictionary represents a dataset. Specific keys can be provided to
fetch from the HDF5 file, if not provided, all keys will be fetched. This
method is wrapper around the fetch_data method of the TaskHandler class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_ids</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The identifiers of the data files in the database.</p></li>
<li><p><strong>pydantic_data_schema</strong> (<em>object</em>)  The pydantic schema of the data. Must inherit from the DataSchema class.</p></li>
<li><p><strong>keys</strong> (<em>str</em>)  Optional keys to fetch from the HDF5 file, if not provided, all keys
will be fetched.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>data</strong>  List of the datasets fetched from the database as dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.inference">
<span class="sig-name descname"><span class="pre">inference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.inference" title="Link to this definition"></a></dt>
<dd><p>Run the inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.inference_base">
<span class="sig-name descname"><span class="pre">inference_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.inference_base" title="Link to this definition"></a></dt>
<dd><p>Run the inference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.load_assets">
<span class="sig-name descname"><span class="pre">load_assets</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.load_assets" title="Link to this definition"></a></dt>
<dd><p>This method will be called during algorithm initialization. It can
be used to load the assets required for the algorithm (e.g. the model).
The assets must be accessed only by the TaskHandler.load_asset method and
not directly from the file system. The must be stored as a attribute of
the runner object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.load_item_from_session">
<span class="sig-name descname"><span class="pre">load_item_from_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">any</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.load_item_from_session" title="Link to this definition"></a></dt>
<dd><p>Fetch an item from the session cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key to fetch the item.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The item fetched from the session cache.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.log_message">
<span class="sig-name descname"><span class="pre">log_message</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">logging_level</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'INFO'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.log_message" title="Link to this definition"></a></dt>
<dd><p>Log a message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> (<em>str</em>)  The message to log.</p></li>
<li><p><strong>logging_level</strong> (<em>str</em>)  The logging level as defined in the logging module. Default is INFO.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong>  If an invalid logging level is provided.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.post_data">
<span class="sig-name descname"><span class="pre">post_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pydantic_data_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">DataSchema</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.post_data" title="Link to this definition"></a></dt>
<dd><p>Uploads a list of datasets to the database. The dataset is a dictionary
where the keys are the names of the datasets and the values are the
datasets themselves (e.g. numpy arrays). A pydantic schema must be provided
to validate the data before uploading. The data is uploaded as HDF5 files.
This method is wrapper around the post_data method of the TaskHandler class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>list</em><em>[</em><em>dict</em><em>]</em>)  List of the datasets to upload. Each dataset is a defined as a dictionary.</p></li>
<li><p><strong>pydantic_data_schema</strong> (<em>object</em>)  The pydantic schema of the data. Must inherit from the DataSchema class.</p></li>
<li><p><strong>parallel</strong> (<em>bool</em><em>, </em><em>optional</em>)  If True, the data will be uploaded in parallel. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of the identifiers of the uploaded datasets.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.postprocess">
<span class="sig-name descname"><span class="pre">postprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.postprocess" title="Link to this definition"></a></dt>
<dd><p>Postprocess the output data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.postprocess_base">
<span class="sig-name descname"><span class="pre">postprocess_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.postprocess_base" title="Link to this definition"></a></dt>
<dd><p>Postprocess the output data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The output data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.preprocess">
<span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.preprocess" title="Link to this definition"></a></dt>
<dd><p>Preprocess the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p></li>
<li><p><strong>args</strong> (<em>dict</em>)  Additional arguments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.preprocess_base">
<span class="sig-name descname"><span class="pre">preprocess_base</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.preprocess_base" title="Link to this definition"></a></dt>
<dd><p>Preprocess the input data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The preprocessed input data.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.register_task_handler">
<span class="sig-name descname"><span class="pre">register_task_handler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_handler</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_json</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.register_task_handler" title="Link to this definition"></a></dt>
<dd><p>Reregister the task handler (e.g. in the init method of the runner or
after fetching the runner from cache).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_handler</strong> (<a class="reference internal" href="#tasks.TaskHandler.TaskHandler" title="tasks.TaskHandler.TaskHandler"><em>TaskHandler</em></a>)  Instance of the TaskHandler class.</p></li>
<li><p><strong>algorithm_json</strong> (<em>dict</em>)  The algorithm json file as a dictionary. The algorithm json file
contains the metadata of the algorithm (e.g. algorithm type, tags).
The default value is None. If None, the algorithm type will not be
checked.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.remove_item_from_session">
<span class="sig-name descname"><span class="pre">remove_item_from_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.remove_item_from_session" title="Link to this definition"></a></dt>
<dd><p>Remove an item from the session cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key to remove the item.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.run">
<span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.run" title="Link to this definition"></a></dt>
<dd><p>Run the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_data</strong> (<em>dict</em>)  The input data.</p></li>
<li><p><strong>args</strong> (<em>dict</em>)  Additional arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>Exception</strong>  If an error occurs during the execution.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.save_item_to_session">
<span class="sig-name descname"><span class="pre">save_item_to_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.save_item_to_session" title="Link to this definition"></a></dt>
<dd><p>Save an item to the session cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>any</em>)  The item to save.</p></li>
<li><p><strong>key</strong> (<em>str</em>)  The key to save the item.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="algorithm_utils.BaseRunner.BaseRunner.set_progress">
<span class="sig-name descname"><span class="pre">set_progress</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#algorithm_utils.BaseRunner.BaseRunner.set_progress" title="Link to this definition"></a></dt>
<dd><p>Set the progress of the execution. The progress must be a float between
0 and 1.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>progress</strong> (<em>float</em>)  The progress of the execution.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-0">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="id0">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">algorithm_utils.AlgorithmDeployer.</span></span><span class="sig-name descname"><span class="pre">AlgorithmDeployer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algorithm_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Link to this definition"></a></dt>
<dd><p>The AlgorithmDeployer class is used to deploy an algorithm to the algorithm
store in the database. The algorithm directory gets automatically separated
into the algorithm module by detecting all .py files and zipping them as a
python module and storing them in the module-store collection. Files other than
.py files are stored as assets in the asset-store collection. The algorithm
metadata is stored in the algorithm-store collection as a json file. The json file
contains the algorithm name, major and minor version, the module id, the assets
dictionary and the timestamp of when the algorithm was stored.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>algortihm_directory</strong> (<em>str</em>)  The path to the algorithm directory.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="id1">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate_etag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bytes</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#id1" title="Link to this definition"></a></dt>
<dd><p>Calculate the etag hash of a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>bytes</em>)  The file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The etag hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id2">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_if_zip_is_importable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_zip</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#id2" title="Link to this definition"></a></dt>
<dd><p>Check if a a zipped module is importable.
:param path_to_zip: The path to the zip file.
:type path_to_zip: str</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if the module is importable, False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id3">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_other_than_py_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_pycache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_gitignore</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#id3" title="Link to this definition"></a></dt>
<dd><p>Find all the files in a directory other than .py files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>directory</strong> (<em>str</em>)  The directory to search.</p></li>
<li><p><strong>ignore_pycache</strong> (<em>bool</em><em>, </em><em>optional</em>)  Whether to ignore the __pycache__ directory. The default is True.</p></li>
<li><p><strong>ignore_gitignore</strong> (<em>bool</em><em>, </em><em>optional</em>)  Whether to ignore the .gitignore file. The default is True.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of files other than .py files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id4">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">find_py_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_pycache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#id4" title="Link to this definition"></a></dt>
<dd><p>Find all the .py files in a directory recursively.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>)  The directory to search.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of .py files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id5">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">generate_uuid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#id5" title="Link to this definition"></a></dt>
<dd><p>Generate a uuid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em><em>, </em><em>optional</em>)  The version of the uuid. The default is 1.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The uuid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id6">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash_directory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">directory</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id6" title="Link to this definition"></a></dt>
<dd><p>Compute the md5 hash of a directory based on its contents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>directory</strong> (<em>str</em>)  The path to the directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The md5 hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id7">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hash_py_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id7" title="Link to this definition"></a></dt>
<dd><p>Compute the md5 hash of a .py file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file</strong> (<em>str</em>)  The path to the file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The md5 hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id8">
<span class="sig-name descname"><span class="pre">parse_pyproject_toml</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_algorithm_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="headerlink" href="#id8" title="Link to this definition"></a></dt>
<dd><p>Parse the pyproject.toml file in the algorithm directory to get the
algorithm name, major version and minor version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_to_algorithm_directory</strong> (<em>str</em>)  The path to the algorithm directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The algorithm name, major version and minor version.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id9">
<em class="property"><span class="k"><span class="pre">static</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">process_path_to_dict_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#id9" title="Link to this definition"></a></dt>
<dd><p>This method takes a path to a file specified as directory and substitutes
any backslashes and double backslashes with forward slashes. It also removes
the leading forward slash if it exists. This is necessary to store the
directory structure as a dictionary key which can then be accessed by the
server independently of the operating system, where the deployment is
performed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>str</em>)  A path to a file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The processed path with forward slashes and without the leading forward
slash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id10">
<span class="sig-name descname"><span class="pre">store_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">database_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separate_runner_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'algorithm-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">module_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'module-store'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asset_collection_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'asset-store'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#id10" title="Link to this definition"></a></dt>
<dd><p>Store the algorithm to the algorithm store.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>database_connection</strong> (<em>DatabaseConnection</em>)  The database connection object. Can be None if the algorithm is not
supposed to be stored in the database (e.g. for local testing and
development).</p></li>
<li><p><strong>separate_runner_path</strong> (<em>str</em><em>, </em><em>optional</em>)  The path to the runner file. Use this if the runner file is not in
the root of the algorithm directory. The default is None.</p></li>
<li><p><strong>algorithm_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the algorithm. The default is
algorithm-store.</p></li>
<li><p><strong>module_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the module. The default is
module-store.</p></li>
<li><p><strong>asset_collection_name</strong> (<em>str</em><em>, </em><em>optional</em>)  The name of the collection to store the assets. The default is
asset-store.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-tasks.TaskHandler">
<span id="tasks"></span><h1>Tasks<a class="headerlink" href="#module-tasks.TaskHandler" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tasks.TaskHandler.</span></span><span class="sig-name descname"><span class="pre">TaskHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_connection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">S3Connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_update</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">task_session</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">TaskSession</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler" title="Link to this definition"></a></dt>
<dd><p>Task handler class for the execution task. This class is used to update
the progress, status and log of the execution task. Also contains methods
to fetch the algorithm, assets and data from the database server of choice.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<em>str</em>)  The identifier of the task. Typically a UUID.</p></li>
<li><p><strong>database_connection</strong> (<em>object</em>)  The database connection object instance. Must inherit from the
BaseConnection class and implement the required methods.</p></li>
<li><p><strong>database_update</strong> (<em>bool</em><em>, </em><em>optional</em>)  Whether to the execution record in the database, by default True.
Can be set to False for example when debugging locally.</p></li>
<li><p><strong>task_session</strong> (<a class="reference internal" href="#session.TaskSession.TaskSession" title="session.TaskSession.TaskSession"><em>TaskSession</em></a><em>, </em><em>optional</em>)  The task session object instance. Must inherit from the TaskSession
class, by default None.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.fetch_algorithm">
<span class="sig-name descname"><span class="pre">fetch_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algorithm_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_device_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.fetch_algorithm" title="Link to this definition"></a></dt>
<dd><p>Fetches the algorithm from the database and imports its corresponding
Python module and runner class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>algorithm_id</strong> (<em>str</em>)  The id of the algorithm.</p></li>
<li><p><strong>execution_device_override</strong> (<em>str</em><em>, </em><em>optional</em>)  The computing device override, by default None. If provided, the
device will be set to the computing device override (if the device
is supported and available).</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>algorithm</strong>  The algorithm Runner object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.fetch_asset">
<span class="sig-name descname"><span class="pre">fetch_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">asset_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BytesIO</span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.fetch_asset" title="Link to this definition"></a></dt>
<dd><p>Fetches an asset as bytes from the database by its path relative to the
algorithm Runner class.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>asset_path</strong> (<em>str</em>)  The path to the asset relative to the algorithm Runner class. e.g.
files/weights.pth</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>asset</strong>  The asset as bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>io.BytesIO</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.fetch_data">
<span class="sig-name descname"><span class="pre">fetch_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pydantic_data_schema</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.fetch_data" title="Link to this definition"></a></dt>
<dd><p>Fetches the data from the database. A pydantic schema must be provided
to validate the data. The data is fetches as a list of dictionaries, where
each dictionary represents a dataset. Specific keys can be provided to
fetch from the HDF5 file, if not provided, all keys will be fetched.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_ids</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The identifiers of the data files in the database.</p></li>
<li><p><strong>pydantic_data_schema</strong> (<em>object</em>)  The pydantic schema of the data. Must inherit from the DataSchema class.</p></li>
<li><p><strong>keys</strong> (<em>str</em>)  Optional keys to fetch from the HDF5 file, if not provided, all keys
will be fetched.</p></li>
<li><p><strong>parallel</strong> (<em>bool</em><em>, </em><em>optional</em>)  If True, the data will be fetched in parallel. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>data</strong>  List of the datasets fetched from the database as dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.load_item_from_session">
<span class="sig-name descname"><span class="pre">load_item_from_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.load_item_from_session" title="Link to this definition"></a></dt>
<dd><p>Load an object from the task session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key of the object to load.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The object loaded from the task session.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>any</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.mark_as_completed">
<span class="sig-name descname"><span class="pre">mark_as_completed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dataset_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.mark_as_completed" title="Link to this definition"></a></dt>
<dd><p>Mark the task as completed and update its record in the database. This
will set the progress to 1.0, the status to COMPLETED and the time
completed to the current time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>output_dataset_ids</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The output dataset identifiers of the task.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.mark_as_failed">
<span class="sig-name descname"><span class="pre">mark_as_failed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">e</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Exception</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.mark_as_failed" title="Link to this definition"></a></dt>
<dd><p>Mark the task as failed and update its record in the database. This
will set the progress to 1.0, the status to FAILED and the time
completed to the current time. The exception that caused the task to
fail will be logged in the task log.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>e</strong> (<em>Exception</em><em>, </em><em>optional</em>)  The exception that caused the task to fail, by default None. It will
be logged in the task log.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.output_dataset_ids">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">output_dataset_ids</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.output_dataset_ids" title="Link to this definition"></a></dt>
<dd><p>The output dataset identifiers of the task.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the output dataset identifiers of the task.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the output dataset identifiers of the task.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.post_data">
<span class="sig-name descname"><span class="pre">post_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pydantic_data_schema</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Type</span><span class="p"><span class="pre">[</span></span><span class="pre">DataSchema</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.post_data" title="Link to this definition"></a></dt>
<dd><p>Uploads a list of datasets to the database. The dataset is a dictionary
where the keys are the names of the datasets and the values are the
datasets themselves (e.g. numpy arrays). A pydantic schema must be provided
to validate the data before uploading. The data is uploaded as HDF5 files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>result</strong> (<em>dict</em>)  The result to upload to the database.</p></li>
<li><p><strong>pydantic_data_schema</strong> (<em>object</em>)  The pydantic schema of the data. Must inherit from the DataSchema class.</p></li>
<li><p><strong>parallel</strong> (<em>bool</em><em>, </em><em>optional</em>)  If True, the data will be uploaded in parallel. Default is False.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>output_dataset_ids</strong>  The dataset identifiers of the uploaded datasets.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.progress">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">progress</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.progress" title="Link to this definition"></a></dt>
<dd><p>The progress of the task in the range [0., 1.].</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the progress of the task.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the progress of the task.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.remove_item_from_session">
<span class="sig-name descname"><span class="pre">remove_item_from_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.remove_item_from_session" title="Link to this definition"></a></dt>
<dd><p>Remove an object from the task session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key of the object to remove.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.save_item_to_session">
<span class="sig-name descname"><span class="pre">save_item_to_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.save_item_to_session" title="Link to this definition"></a></dt>
<dd><p>Save an object to the task session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>any</em>)  The object to save.</p></li>
<li><p><strong>key</strong> (<em>str</em>)  The key to save the object under.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.session_token">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">session_token</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.session_token" title="Link to this definition"></a></dt>
<dd><p>The identifier of the session. Typically a UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the session id.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the session id.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.status">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.status" title="Link to this definition"></a></dt>
<dd><p>The status of the task. e.g. RUNNING, COMPLETED, FAILED</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the status of the task.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the status of the task.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.task_id">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">task_id</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.task_id" title="Link to this definition"></a></dt>
<dd><p>The identifier of the task. Typically a UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the task id.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the task id.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.time_completed">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">time_completed</span></span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.time_completed" title="Link to this definition"></a></dt>
<dd><p>The time the task was completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the time the task was completed.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the time the task was completed.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.TaskHandler.TaskHandler.update_log">
<span class="sig-name descname"><span class="pre">update_log</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#tasks.TaskHandler.TaskHandler.update_log" title="Link to this definition"></a></dt>
<dd><p>Update the log of the task in the database. This method is called
automatically when the task is completed or failed. It can also be
called manually to update the log during the execution of the task.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>log</strong> (<em>str</em>)  The log of the task.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-tasks.DebuggingTaskHandler">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="tasks.DebuggingTaskHandler.DebuggingTaskHandler">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tasks.DebuggingTaskHandler.</span></span><span class="sig-name descname"><span class="pre">DebuggingTaskHandler</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">task_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_folder_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pcb_temp'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler" title="Link to this definition"></a></dt>
<dd><p>TaskHandler for debugging algorithm runners locally, without the need to have
a running server. Works in local filesystem instead of database server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>task_id</strong> (<em>str</em>)  The task id.</p></li>
<li><p><strong>database_connection</strong> (<em>object</em>)  In this case, the database connection is the path to the local filesystem.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_algorithm">
<span class="sig-name descname"><span class="pre">fetch_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_algorithm</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'cpu'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">object</span></span></span><a class="headerlink" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_algorithm" title="Link to this definition"></a></dt>
<dd><p>Fetches the algorithm from the local filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>path_to_algorithm</strong> (<em>str</em>)  The path to the algorithm.</p></li>
<li><p><strong>device</strong> (<em>str</em>)  The device to run the algorithm on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The algorithm runner instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>object</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_asset">
<span class="sig-name descname"><span class="pre">fetch_asset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_to_asset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">BytesIO</span></span></span><a class="headerlink" href="#tasks.DebuggingTaskHandler.DebuggingTaskHandler.fetch_asset" title="Link to this definition"></a></dt>
<dd><p>Fetches the asset from the local filesystem.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_to_asset</strong> (<em>str</em>)  The path to the asset.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The asset as a BytesIO object.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>io.BytesIO</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-session.TaskSession">
<span id="sessions"></span><h1>Sessions<a class="headerlink" href="#module-session.TaskSession" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="session.TaskSession.TaskSession">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">session.TaskSession.</span></span><span class="sig-name descname"><span class="pre">TaskSession</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_number_of_data_caches</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cache_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_cache_memory_mb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expire_hours</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">24</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">not_implemented</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#session.TaskSession.TaskSession" title="Link to this definition"></a></dt>
<dd><p>The TaskSession class is used to serve as a common interface for individual
TaskHandler instances. The session is identified by a session token. The purpose
of session is to mainly handle in-memory data caches for algorithms.
This is useful, as in some algorithms, it is necessary to be able to quickly access
and modify some data without the need to repeatedly store and fetch the data
from the database. The data is stored under in a dictionary-like structure, where
the key is the session token and the value is the data cache object. The session token
is an unique identifier generated for each session. If the client wishes to continue the
session, the session token is passed in execution response, and when the client
sends in other requests, they can pass the session in the session_token field.
A new session is then created with the session token and with the access to the
data stored in the cache under the particular session token.</p>
<p>TODO: this currently only works for a single process. If we want to scale this
to multiple processes, we need to use a shared memory object with access across
the individual worker nodes.</p>
<dl class="py method">
<dt class="sig sig-object py" id="session.TaskSession.TaskSession.add_item">
<span class="sig-name descname"><span class="pre">add_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#session.TaskSession.TaskSession.add_item" title="Link to this definition"></a></dt>
<dd><p>Store the item in the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>any</em>)  The item to store.</p></li>
<li><p><strong>key</strong> (<em>str</em>)  The key to store the item with.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="session.TaskSession.TaskSession.clear_cache">
<span class="sig-name descname"><span class="pre">clear_cache</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#session.TaskSession.TaskSession.clear_cache" title="Link to this definition"></a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="session.TaskSession.TaskSession.remove_item">
<span class="sig-name descname"><span class="pre">remove_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#session.TaskSession.TaskSession.remove_item" title="Link to this definition"></a></dt>
<dd><p>Remove the item from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key to remove.</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="session.TaskSession.TaskSession.session_token">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">session_token</span></span><a class="headerlink" href="#session.TaskSession.TaskSession.session_token" title="Link to this definition"></a></dt>
<dd><p>The identifier of the session. Typically a UUID.</p>
<dl class="field-list simple">
<dt class="field-odd">Getter<span class="colon">:</span></dt>
<dd class="field-odd"><p>Returns the session id.</p>
</dd>
<dt class="field-even">Setter<span class="colon">:</span></dt>
<dd class="field-even"><p>Sets the session id.</p>
</dd>
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-session.DataCache">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="session.DataCache.DataCache">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">session.DataCache.</span></span><span class="sig-name descname"><span class="pre">DataCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_memory_mb</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#session.DataCache.DataCache" title="Link to this definition"></a></dt>
<dd><p>This class serves as a data cache for the task handler. It is used to store
data in memory for quick access and modification. The cache is identified by
a key which is used to store and retrieve the data. The cache has a maximum
size and memory limit. If the cache exceeds the maximum size, the oldest item
is removed. If the cache exceeds the maximum memory limit, the cache is cleared.</p>
<dl class="py method">
<dt class="sig sig-object py" id="session.DataCache.DataCache.add_item">
<span class="sig-name descname"><span class="pre">add_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#session.DataCache.DataCache.add_item" title="Link to this definition"></a></dt>
<dd><p>Add an item to the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>obj</strong> (<em>Any</em>)  The item to add to the cache.</p></li>
<li><p><strong>key</strong> (<em>str</em>)  The key of the item.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="session.DataCache.DataCache.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#session.DataCache.DataCache.clear" title="Link to this definition"></a></dt>
<dd><p>Clear the cache.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="session.DataCache.DataCache.remove_item">
<span class="sig-name descname"><span class="pre">remove_item</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#session.DataCache.DataCache.remove_item" title="Link to this definition"></a></dt>
<dd><p>Remove an item from the cache.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>str</em>)  The key of the item to remove.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-database_connection.BaseConnection">
<span id="database-connection"></span><h1>Database Connection<a class="headerlink" href="#module-database_connection.BaseConnection" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">database_connection.BaseConnection.</span></span><span class="sig-name descname"><span class="pre">BaseConnection</span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection" title="Link to this definition"></a></dt>
<dd><p>A generic database connection class. This class is meant to be inherited by
specific database connection classes. It defines the methods for interacting
with the object storage database. It assumes that the database is structured
as a set of collections, where each collection contains a set of
objects. The objects can be any type of data, such as files, images, or
other objects. The objects are acessed by their names, and the collections
are accessed by their names. For example, in an S3 database, the collections
would be the buckets, and the objects would be the files in the buckets.</p>
<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.check_collections_exists">
<span class="sig-name descname"><span class="pre">check_collections_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.check_collections_exists" title="Link to this definition"></a></dt>
<dd><p>Checks if collections exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the collections exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.check_objects_exist">
<span class="sig-name descname"><span class="pre">check_objects_exist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.check_objects_exist" title="Link to this definition"></a></dt>
<dd><p>Checks if objects exist in a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the objects exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.create_collections">
<span class="sig-name descname"><span class="pre">create_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.create_collections" title="Link to this definition"></a></dt>
<dd><p>Creates collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.delete_collections">
<span class="sig-name descname"><span class="pre">delete_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.delete_collections" title="Link to this definition"></a></dt>
<dd><p>Deletes collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.delete_objects">
<span class="sig-name descname"><span class="pre">delete_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.delete_objects" title="Link to this definition"></a></dt>
<dd><p>Deletes objects from a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object names.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.get_objects">
<span class="sig-name descname"><span class="pre">get_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.get_objects" title="Link to this definition"></a></dt>
<dd><p>Gets objects from a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>str</em>)  The object names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of bytes objects.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.list_collections">
<span class="sig-name descname"><span class="pre">list_collections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.list_collections" title="Link to this definition"></a></dt>
<dd><p>Lists all object collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of object collections.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.list_objects">
<span class="sig-name descname"><span class="pre">list_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.list_objects" title="Link to this definition"></a></dt>
<dd><p>Lists all objects in a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of objects in the collection.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.put_objects">
<span class="sig-name descname"><span class="pre">put_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.put_objects" title="Link to this definition"></a></dt>
<dd><p>Puts objects into a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object names.</p></li>
<li><p><strong>object</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The byte objects.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.BaseConnection.BaseConnection.put_objects_with_duplicity_check">
<span class="sig-name descname"><span class="pre">put_objects_with_duplicity_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.BaseConnection.BaseConnection.put_objects_with_duplicity_check" title="Link to this definition"></a></dt>
<dd><p>Puts objects into a collection with duplicity check. Returns the list of
object names, where the objects of which duplicates were found, substituted
with the object names of the duplicates.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object names.</p></li>
<li><p><strong>object</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The byte objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of object names.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-database_connection.S3Connection">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">database_connection.S3Connection.</span></span><span class="sig-name descname"><span class="pre">S3Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_access_key_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aws_secret_access_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">region_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_store_expire_days</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collection_prefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database_connection.S3Connection.S3Connection" title="Link to this definition"></a></dt>
<dd><p>A connection class for an S3 object storage database. This class inherits from
the BaseConnection class and implements the methods for interacting with an S3
object storage database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>endpoint_url</strong> (<em>str</em>)  The endpoint URL.</p></li>
<li><p><strong>aws_access_key_id</strong> (<em>str</em>)  The AWS access key ID.</p></li>
<li><p><strong>aws_secret_access_key</strong> (<em>str</em>)  The AWS secret access key.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.check_collections_exists">
<span class="sig-name descname"><span class="pre">check_collections_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.check_collections_exists" title="Link to this definition"></a></dt>
<dd><p>Checks if buckets exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the collection exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.check_objects_exist">
<span class="sig-name descname"><span class="pre">check_objects_exist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.check_objects_exist" title="Link to this definition"></a></dt>
<dd><p>Checks if objects exist in a bucket.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object keys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the objects exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.create_collections">
<span class="sig-name descname"><span class="pre">create_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.create_collections" title="Link to this definition"></a></dt>
<dd><p>Creates collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.delete_collections">
<span class="sig-name descname"><span class="pre">delete_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.delete_collections" title="Link to this definition"></a></dt>
<dd><p>Deletes collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.delete_objects">
<span class="sig-name descname"><span class="pre">delete_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.delete_objects" title="Link to this definition"></a></dt>
<dd><p>Deletes objects in a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object keys.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.get_objects">
<span class="sig-name descname"><span class="pre">get_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.get_objects" title="Link to this definition"></a></dt>
<dd><p>Gets objects from a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_keys</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object keys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of object bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[bytes]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.list_collections">
<span class="sig-name descname"><span class="pre">list_collections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.list_collections" title="Link to this definition"></a></dt>
<dd><p>Lists all collections.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of collections.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.list_objects">
<span class="sig-name descname"><span class="pre">list_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.list_objects" title="Link to this definition"></a></dt>
<dd><p>Lists all objects in a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of object keys.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.put_objects">
<span class="sig-name descname"><span class="pre">put_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.put_objects" title="Link to this definition"></a></dt>
<dd><p>Puts objects into a collection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object keys.</p></li>
<li><p><strong>object</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The byte objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.S3Connection.S3Connection.put_objects_with_duplicity_check">
<span class="sig-name descname"><span class="pre">put_objects_with_duplicity_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.S3Connection.S3Connection.put_objects_with_duplicity_check" title="Link to this definition"></a></dt>
<dd><p>Puts objects into a collection with duplicity check. Returns the list of
object keys, where the objects of which duplicates were found, substituted
with the object keys of the duplicates. The check is based on the ETag.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The collection name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The object names.</p></li>
<li><p><strong>object</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The byte objects.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of object names.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-database_connection.TempfileConnection">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">database_connection.TempfileConnection.</span></span><span class="sig-name descname"><span class="pre">TempfileConnection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temp_folder_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'pcb_temp'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection" title="Link to this definition"></a></dt>
<dd><p>A connection class for a local file system database. This class inherits from
the BaseConnection class and implements the methods for interacting with a local
tempfile file structure mimicking an object storage database. Can be used for
testing and debugging purposes, or when a real database is not available for
local deployment of the application.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>temp_folder_name</strong> (<em>str</em>)  The name of the temporary folder.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.check_collections_exists">
<span class="sig-name descname"><span class="pre">check_collections_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.check_collections_exists" title="Link to this definition"></a></dt>
<dd><p>Check if the subdirectories exist in the temporary folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The subdirectory names.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the subdirectories exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.check_objects_exist">
<span class="sig-name descname"><span class="pre">check_objects_exist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.check_objects_exist" title="Link to this definition"></a></dt>
<dd><p>Check if files exist in a subdirectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The file names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the files exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.create_collections">
<span class="sig-name descname"><span class="pre">create_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.create_collections" title="Link to this definition"></a></dt>
<dd><p>Create subdirectories in the temporary folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The subdirectory names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.delete_collections">
<span class="sig-name descname"><span class="pre">delete_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.delete_collections" title="Link to this definition"></a></dt>
<dd><p>Delete the subdirectories in the temporary folder including all files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The subdirectory names.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.delete_objects">
<span class="sig-name descname"><span class="pre">delete_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.delete_objects" title="Link to this definition"></a></dt>
<dd><p>Delete files in a subdirectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The file names.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.get_objects">
<span class="sig-name descname"><span class="pre">get_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.get_objects" title="Link to this definition"></a></dt>
<dd><p>Get files from a subdirectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The file names.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of file bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.list_collections">
<span class="sig-name descname"><span class="pre">list_collections</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.list_collections" title="Link to this definition"></a></dt>
<dd><p>List all subdirectories in the temporary folder.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of subdirectories.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.list_objects">
<span class="sig-name descname"><span class="pre">list_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.list_objects" title="Link to this definition"></a></dt>
<dd><p>List all files in a subdirectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of files.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.put_objects">
<span class="sig-name descname"><span class="pre">put_objects</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.put_objects" title="Link to this definition"></a></dt>
<dd><p>Put files in a subdirectory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The file names.</p></li>
<li><p><strong>objects</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The file bytes.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_connection.TempfileConnection.TempfileConnection.put_objects_with_duplicity_check">
<span class="sig-name descname"><span class="pre">put_objects_with_duplicity_check</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">object_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">objects</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bytes</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#database_connection.TempfileConnection.TempfileConnection.put_objects_with_duplicity_check" title="Link to this definition"></a></dt>
<dd><p>Put files in a subdirectory with a check for existing files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_name</strong> (<em>str</em>)  The subdirectory name.</p></li>
<li><p><strong>object_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The file names.</p></li>
<li><p><strong>objects</strong> (<em>list</em><em>[</em><em>bytes</em><em>]</em>)  The file bytes.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of booleans indicating if the files were put.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<p id="module-database_connection.database_utils">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py function">
<dt class="sig sig-object py" id="database_connection.database_utils.calculate_etag">
<span class="sig-prename descclassname"><span class="pre">database_connection.database_utils.</span></span><span class="sig-name descname"><span class="pre">calculate_etag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes_obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database_connection.database_utils.calculate_etag" title="Link to this definition"></a></dt>
<dd><p>Calculate the etag hash of a file, the etag should be the same as the etag
calculate internally by the boto3/minio client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bytes_obj</strong> (<em>str</em>)  The file bytes to calculate the etag hash of.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The etag hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="database_connection.database_utils.calculate_etag_multipart">
<span class="sig-prename descclassname"><span class="pre">database_connection.database_utils.</span></span><span class="sig-name descname"><span class="pre">calculate_etag_multipart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk_size</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#database_connection.database_utils.calculate_etag_multipart" title="Link to this definition"></a></dt>
<dd><p>Calculate the etag hash of a file uploaded using multipart upload. The etag
should be the same as the etag calculate internally by the boto3/minio client.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bytes_obj</strong> (<em>str</em>)  The file bytes to calculate the etag hash of.</p></li>
<li><p><strong>chunk_size</strong> (<em>int</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The etag hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-server_utils">
<span id="server-utils"></span><h1>Server Utils<a class="headerlink" href="#module-server_utils" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py function">
<dt class="sig sig-object py" id="server_utils.algorithm_cache">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">algorithm_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.algorithm_cache" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>A cache decorator for algorithms. The cache is based on the algorithm_id and device.
The cache is implemented as a dictionary with a maximum size. When the algorithm is requested
the cache is checked and if the algorithm with the same algorithm_id and device is found
the algorithms Runner object is returned from the cache. If the algorithm is not found in the
cache the algorithm is executed and the result is stored in the cache. If the cache size limit
is reached the oldest cache entry is invalidated.</p>
<dl class="simple">
<dt>maxsize<span class="classifier">int, optional</span></dt><dd><p>The maximum size of the cache. The default is None.</p>
</dd>
</dl>
</div></blockquote>
<p>;</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.calculate_s3_etag">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">calculate_s3_etag</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bytes_obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.calculate_s3_etag" title="Link to this definition"></a></dt>
<dd><p>Calculate the etag hash of a file, the etag should be the same as the etag
calculate internally by the boto3/minio client</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>bytes_obj</strong> (<em>io.BytesIO</em>)  The file bytes to calculate the etag hash of.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The etag hash.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.check_and_create_database_collections">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">check_and_create_database_collections</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">collection_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">database_connection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">object</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#server_utils.check_and_create_database_collections" title="Link to this definition"></a></dt>
<dd><p>Checks if the collections exist in the database and creates them if they do not exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>collection_names</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The collection names.</p></li>
<li><p><strong>database_connection</strong> (<em>object</em>)  The database connection object.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of newly created collections.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.check_mps_availability">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">check_mps_availability</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.check_mps_availability" title="Link to this definition"></a></dt>
<dd><p>Check if MacOS MPS (Metal Performance Shaders) is available.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if MPS is available, False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.check_system_gpu_availability">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">check_system_gpu_availability</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.check_system_gpu_availability" title="Link to this definition"></a></dt>
<dd><p>Check if system has GPU support.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><em>bool</em>  True if CUDA is available, False otherwise.</p></li>
<li><p><em>int</em>  The number of available GPUs.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.check_torch_with_cuda_available">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">check_torch_with_cuda_available</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.check_torch_with_cuda_available" title="Link to this definition"></a></dt>
<dd><p>Check if PyTorch has CUDA support.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>True if PyTorch has CUDA support, False otherwise.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.data_cache">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">data_cache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.data_cache" title="Link to this definition"></a></dt>
<dd><blockquote>
<div><p>A cache decorator for data. The cache is based on the unique file key.
The cache is implemented as a dictionary with a maximum size. When the file is requested
the cache is checked and if the file with the same key is found
the file is returned from the cache. If the file is not found in the
cache the file is read and the result is stored in the cache. If the cache size limit
is reached the oldest cache entry is invalidated.</p>
<dl class="simple">
<dt>maxsize<span class="classifier">int, optional</span></dt><dd><p>The maximum size of the cache. The default is None.</p>
</dd>
</dl>
</div></blockquote>
<p>;</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.find_algorithm_by_id">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">find_algorithm_by_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algorithm_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_contents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">separator</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'~'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span></span></span><a class="headerlink" href="#server_utils.find_algorithm_by_id" title="Link to this definition"></a></dt>
<dd><p>Find an algorithm by its id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>algorithm_id</strong> (<em>str</em>)  The id of the algorithm.</p></li>
<li><p><strong>bucket_contents</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>)  The bucket contents.</p></li>
<li><p><strong>separator</strong> (<em>str</em><em>, </em><em>optional</em>)  The separator between the fields in the key. The default is ~.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The algorithm key, id, name, major version, minor version.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.generate_uuid">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">generate_uuid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">str</span></span></span><a class="headerlink" href="#server_utils.generate_uuid" title="Link to this definition"></a></dt>
<dd><p>Generate a uuid.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>version</strong> (<em>int</em><em>, </em><em>optional</em>)  The version of the uuid. The default is 1.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The uuid.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="server_utils.weak_lru">
<span class="sig-prename descclassname"><span class="pre">server_utils.</span></span><span class="sig-name descname"><span class="pre">weak_lru</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">maxsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">128</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">typed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#server_utils.weak_lru" title="Link to this definition"></a></dt>
<dd><p>LRU Cache decorator that keeps a weak reference to self</p>
</dd></dl>

<div class="toctree-wrapper compound">
</div>
</section>
<section id="module-routers.algorithms_controller">
<span id="server-endpoints"></span><h1>Server Endpoints<a class="headerlink" href="#module-routers.algorithms_controller" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py function">
<dt class="sig sig-object py" id="routers.algorithms_controller.get_algorithm">
<span class="sig-prename descclassname"><span class="pre">routers.algorithms_controller.</span></span><span class="sig-name descname"><span class="pre">get_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AlgorithmRegisteredResponse</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">FailedAlgorithmRegisteredResponse</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">JSONResponse</span></span></span><a class="headerlink" href="#routers.algorithms_controller.get_algorithm" title="Link to this definition"></a></dt>
<dd><p>Returns algorithm by its name and version.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>algorithm</strong> (<a class="reference internal" href="#pydantic_models.Algorithm" title="pydantic_models.Algorithm"><em>Algorithm</em></a>)  The algorithm.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The algorithm.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse" title="pydantic_models.AlgorithmRegisteredResponse">AlgorithmRegisteredResponse</a>, <a class="reference internal" href="#pydantic_models.FailedAlgorithmRegisteredResponse" title="pydantic_models.FailedAlgorithmRegisteredResponse">FailedAlgorithmRegisteredResponse</a>, JSONResponse</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routers.algorithms_controller.list_model_files">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routers.algorithms_controller.</span></span><span class="sig-name descname"><span class="pre">list_model_files</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positive_tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Query([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">negative_tag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Query([])</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Query(None)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">supported_devices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">Query([])</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">S3ModelFileRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#routers.algorithms_controller.list_model_files" title="Link to this definition"></a></dt>
<dd><p>Lists all available algorithms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>Request</em>)  The request.</p></li>
<li><p><strong>positive_tag</strong> (<em>List</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)  A list of tags the algorithm must have.</p></li>
<li><p><strong>negative_tag</strong> (<em>List</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)  A list of tags the algorithm must not have.</p></li>
<li><p><strong>algorithm_type</strong> (<em>str</em><em> | </em><em>None</em>)  The type of the algorithm.</p></li>
<li><p><strong>supported_devices</strong> (<em>List</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)  The devices the algorithm is compatible with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of algorithms.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="#pydantic_models.AlgorithmRegisteredResponse" title="pydantic_models.AlgorithmRegisteredResponse">AlgorithmRegisteredResponse</a>]</p>
</dd>
</dl>
</dd></dl>

<p id="module-routers.file_controller">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py function">
<dt class="sig sig-object py" id="routers.file_controller.delete_dataset">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routers.file_controller.</span></span><span class="sig-name descname"><span class="pre">delete_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ResponseMessage</span></span></span><a class="headerlink" href="#routers.file_controller.delete_dataset" title="Link to this definition"></a></dt>
<dd><p>Deletes a dataset from the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<em>str</em>)  The id of the dataset.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#pydantic_models.ResponseMessage" title="pydantic_models.ResponseMessage">ResponseMessage</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routers.file_controller.download_dataset">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routers.file_controller.</span></span><span class="sig-name descname"><span class="pre">download_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#routers.file_controller.download_dataset" title="Link to this definition"></a></dt>
<dd><p>Downloads a dataset from database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<em>str</em>)  The id of the dataset.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The dataset.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>StreamingResponse</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routers.file_controller.upload_dataset">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routers.file_controller.</span></span><span class="sig-name descname"><span class="pre">upload_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">FileUploadResponse</span></span></span><a class="headerlink" href="#routers.file_controller.upload_dataset" title="Link to this definition"></a></dt>
<dd><p>Uploads an image stack as a hdf5 file to the database.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>file_upload_body</strong> (<a class="reference internal" href="#pydantic_models.FileUploadBody" title="pydantic_models.FileUploadBody"><em>FileUploadBody</em></a>)  The file upload body.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The file upload response.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pydantic_models.FileUploadResponse" title="pydantic_models.FileUploadResponse">FileUploadResponse</a></p>
</dd>
</dl>
</dd></dl>

<p id="module-routers.execution_controller">Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py function">
<dt class="sig sig-object py" id="routers.execution_controller.execute_algorithm">
<span class="sig-prename descclassname"><span class="pre">routers.execution_controller.</span></span><span class="sig-name descname"><span class="pre">execute_algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">incoming_execution_request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">IncomingExecutionRequest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">background_tasks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BackgroundTasks</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#routers.execution_controller.execute_algorithm" title="Link to this definition"></a></dt>
<dd><p>Executes an algorithm on a dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>Request</em>)  The request.</p></li>
<li><p><strong>incoming_execution_request</strong> (<a class="reference internal" href="#pydantic_models.IncomingExecutionRequest" title="pydantic_models.IncomingExecutionRequest"><em>IncomingExecutionRequest</em></a>)  The incoming execution request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The execution response.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pydantic_models.ExecutionResponse" title="pydantic_models.ExecutionResponse">ExecutionResponse</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="routers.execution_controller.get_execution_record">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">routers.execution_controller.</span></span><span class="sig-name descname"><span class="pre">get_execution_record</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#routers.execution_controller.get_execution_record" title="Link to this definition"></a></dt>
<dd><p>Get execution record by id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>id</strong> (<em>str</em>)  The id of the execution record.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The execution record.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#pydantic_models.ExecutionRecord" title="pydantic_models.ExecutionRecord">ExecutionRecord</a></p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pydantic_models">
<span id="pydantic-models"></span><h1>Pydantic Models<a class="headerlink" href="#module-pydantic_models" title="Link to this heading"></a></h1>
<p>Copyright 2024 TESCAN 3DIM, s.r.o.
All rights reserved</p>
<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.Algorithm">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">Algorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.Algorithm" title="Link to this definition"></a></dt>
<dd><p>Algorithm model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.Algorithm.algorithm_name">
<span class="sig-name descname"><span class="pre">algorithm_name</span></span><a class="headerlink" href="#pydantic_models.Algorithm.algorithm_name" title="Link to this definition"></a></dt>
<dd><p>The name of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.Algorithm.algorithm_major_version">
<span class="sig-name descname"><span class="pre">algorithm_major_version</span></span><a class="headerlink" href="#pydantic_models.Algorithm.algorithm_major_version" title="Link to this definition"></a></dt>
<dd><p>The major version of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.Algorithm.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.Algorithm.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">AlgorithmRegisteredResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_minor_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_input_queue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_description</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">supported_devices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">AdditionalParameterSchema</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse" title="Link to this definition"></a></dt>
<dd><p>Algorithm registered response model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_id">
<span class="sig-name descname"><span class="pre">algorithm_id</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_id" title="Link to this definition"></a></dt>
<dd><p>The id of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_input_queue">
<span class="sig-name descname"><span class="pre">algorithm_input_queue</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_input_queue" title="Link to this definition"></a></dt>
<dd><p>The input queue of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_minor_version">
<span class="sig-name descname"><span class="pre">algorithm_minor_version</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_minor_version" title="Link to this definition"></a></dt>
<dd><p>The minor version of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_name">
<span class="sig-name descname"><span class="pre">algorithm_name</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_name" title="Link to this definition"></a></dt>
<dd><p>The name of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_version">
<span class="sig-name descname"><span class="pre">algorithm_version</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_version" title="Link to this definition"></a></dt>
<dd><p>The major version of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_type">
<span class="sig-name descname"><span class="pre">algorithm_type</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_type" title="Link to this definition"></a></dt>
<dd><p>The type of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_tags">
<span class="sig-name descname"><span class="pre">algorithm_tags</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_tags" title="Link to this definition"></a></dt>
<dd><p>The tags of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.algorithm_description">
<span class="sig-name descname"><span class="pre">algorithm_description</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.algorithm_description" title="Link to this definition"></a></dt>
<dd><p>Description of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.supported_devices">
<span class="sig-name descname"><span class="pre">supported_devices</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.supported_devices" title="Link to this definition"></a></dt>
<dd><p>The supported devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.default_device">
<span class="sig-name descname"><span class="pre">default_device</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.default_device" title="Link to this definition"></a></dt>
<dd><p>The default device.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.additional_parameters">
<span class="sig-name descname"><span class="pre">additional_parameters</span></span><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.additional_parameters" title="Link to this definition"></a></dt>
<dd><p>The additional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.AlgorithmRegisteredResponse.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.AlgorithmRegisteredResponse.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.ExecutionLogRecord">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">ExecutionLogRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.ExecutionLogRecord" title="Link to this definition"></a></dt>
<dd><p>Execution log record model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionLogRecord.log">
<span class="sig-name descname"><span class="pre">log</span></span><a class="headerlink" href="#pydantic_models.ExecutionLogRecord.log" title="Link to this definition"></a></dt>
<dd><p>The log.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionLogRecord.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.ExecutionLogRecord.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">ExecutionRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_dataset_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_device_override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dataset_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_started</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_completed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.ExecutionRecord" title="Link to this definition"></a></dt>
<dd><p>Execution record model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.execution_id">
<span class="sig-name descname"><span class="pre">execution_id</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.execution_id" title="Link to this definition"></a></dt>
<dd><p>The id of the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.algorithm_id">
<span class="sig-name descname"><span class="pre">algorithm_id</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.algorithm_id" title="Link to this definition"></a></dt>
<dd><p>The id of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.input_dataset_ids">
<span class="sig-name descname"><span class="pre">input_dataset_ids</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.input_dataset_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the input datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.execution_device_override">
<span class="sig-name descname"><span class="pre">execution_device_override</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.execution_device_override" title="Link to this definition"></a></dt>
<dd><p>The execution device override.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.additional_parameters">
<span class="sig-name descname"><span class="pre">additional_parameters</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.additional_parameters" title="Link to this definition"></a></dt>
<dd><p>The additional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.session_token">
<span class="sig-name descname"><span class="pre">session_token</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.session_token" title="Link to this definition"></a></dt>
<dd><p>The string identifier of the session.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.output_dataset_ids">
<span class="sig-name descname"><span class="pre">output_dataset_ids</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.output_dataset_ids" title="Link to this definition"></a></dt>
<dd><p>The ids of the output datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.status">
<span class="sig-name descname"><span class="pre">status</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.status" title="Link to this definition"></a></dt>
<dd><p>The status of the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.progress">
<span class="sig-name descname"><span class="pre">progress</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.progress" title="Link to this definition"></a></dt>
<dd><p>The progress of the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.time_started">
<span class="sig-name descname"><span class="pre">time_started</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.time_started" title="Link to this definition"></a></dt>
<dd><p>The time the execution started.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.time_completed">
<span class="sig-name descname"><span class="pre">time_completed</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.time_completed" title="Link to this definition"></a></dt>
<dd><p>The time the execution completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.log">
<span class="sig-name descname"><span class="pre">log</span></span><a class="headerlink" href="#pydantic_models.ExecutionRecord.log" title="Link to this definition"></a></dt>
<dd><p>The log of the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionRecord.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.ExecutionRecord.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.ExecutionResponse">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">ExecutionResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.ExecutionResponse" title="Link to this definition"></a></dt>
<dd><p>Execution response model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionResponse.execution_id">
<span class="sig-name descname"><span class="pre">execution_id</span></span><a class="headerlink" href="#pydantic_models.ExecutionResponse.execution_id" title="Link to this definition"></a></dt>
<dd><p>The id of the execution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ExecutionResponse.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.ExecutionResponse.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.FailedAlgorithmRegisteredResponse">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">FailedAlgorithmRegisteredResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">message</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.FailedAlgorithmRegisteredResponse" title="Link to this definition"></a></dt>
<dd><p>Failed algorithm response model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_name">
<span class="sig-name descname"><span class="pre">algorithm_name</span></span><a class="headerlink" href="#pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_name" title="Link to this definition"></a></dt>
<dd><p>The name of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_version">
<span class="sig-name descname"><span class="pre">algorithm_version</span></span><a class="headerlink" href="#pydantic_models.FailedAlgorithmRegisteredResponse.algorithm_version" title="Link to this definition"></a></dt>
<dd><p>The version of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FailedAlgorithmRegisteredResponse.message">
<span class="sig-name descname"><span class="pre">message</span></span><a class="headerlink" href="#pydantic_models.FailedAlgorithmRegisteredResponse.message" title="Link to this definition"></a></dt>
<dd><p>The message.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FailedAlgorithmRegisteredResponse.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.FailedAlgorithmRegisteredResponse.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.FileUploadBody">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">FileUploadBody</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_body</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.FileUploadBody" title="Link to this definition"></a></dt>
<dd><p>File upload body model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FileUploadBody.file_body">
<span class="sig-name descname"><span class="pre">file_body</span></span><a class="headerlink" href="#pydantic_models.FileUploadBody.file_body" title="Link to this definition"></a></dt>
<dd><p>The file body.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>List</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FileUploadBody.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.FileUploadBody.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.FileUploadResponse">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">FileUploadResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.FileUploadResponse" title="Link to this definition"></a></dt>
<dd><p>File upload response model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FileUploadResponse.file_id">
<span class="sig-name descname"><span class="pre">file_id</span></span><a class="headerlink" href="#pydantic_models.FileUploadResponse.file_id" title="Link to this definition"></a></dt>
<dd><p>The id of the file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.FileUploadResponse.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.FileUploadResponse.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">IncomingExecutionRequest</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_dataset_ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">execution_device_override</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">additional_parameters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest" title="Link to this definition"></a></dt>
<dd><p>Incoming execution request model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.algorithm_id">
<span class="sig-name descname"><span class="pre">algorithm_id</span></span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.algorithm_id" title="Link to this definition"></a></dt>
<dd><p>The id of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.input_dataset_id">
<span class="sig-name descname"><span class="pre">input_dataset_id</span></span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.input_dataset_id" title="Link to this definition"></a></dt>
<dd><p>The id of the input dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.execution_device_override">
<span class="sig-name descname"><span class="pre">execution_device_override</span></span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.execution_device_override" title="Link to this definition"></a></dt>
<dd><p>The execution device override.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.additional_parameters">
<span class="sig-name descname"><span class="pre">additional_parameters</span></span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.additional_parameters" title="Link to this definition"></a></dt>
<dd><p>The additional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.session_token">
<span class="sig-name descname"><span class="pre">session_token</span></span><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.session_token" title="Link to this definition"></a></dt>
<dd><p>The string identifier of the session.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.IncomingExecutionRequest.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.IncomingExecutionRequest.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.MinioServer">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">MinioServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">executable_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">console_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.MinioServer" title="Link to this definition"></a></dt>
<dd><p>Minio server model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServer.executable_path">
<span class="sig-name descname"><span class="pre">executable_path</span></span><a class="headerlink" href="#pydantic_models.MinioServer.executable_path" title="Link to this definition"></a></dt>
<dd><p>The path to the minio executable.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServer.storage_path">
<span class="sig-name descname"><span class="pre">storage_path</span></span><a class="headerlink" href="#pydantic_models.MinioServer.storage_path" title="Link to this definition"></a></dt>
<dd><p>The path to the minio storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServer.console_address">
<span class="sig-name descname"><span class="pre">console_address</span></span><a class="headerlink" href="#pydantic_models.MinioServer.console_address" title="Link to this definition"></a></dt>
<dd><p>The address of the minio console.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServer.address">
<span class="sig-name descname"><span class="pre">address</span></span><a class="headerlink" href="#pydantic_models.MinioServer.address" title="Link to this definition"></a></dt>
<dd><p>The address of the minio server.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServer.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.MinioServer.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.MinioServerInfo">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">MinioServerInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">storage_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">console_address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.MinioServerInfo" title="Link to this definition"></a></dt>
<dd><p>Minio server info model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServerInfo.storage_path">
<span class="sig-name descname"><span class="pre">storage_path</span></span><a class="headerlink" href="#pydantic_models.MinioServerInfo.storage_path" title="Link to this definition"></a></dt>
<dd><p>The path to the minio storage.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServerInfo.console_address">
<span class="sig-name descname"><span class="pre">console_address</span></span><a class="headerlink" href="#pydantic_models.MinioServerInfo.console_address" title="Link to this definition"></a></dt>
<dd><p>The address of the minio console.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServerInfo.address">
<span class="sig-name descname"><span class="pre">address</span></span><a class="headerlink" href="#pydantic_models.MinioServerInfo.address" title="Link to this definition"></a></dt>
<dd><p>The address of the minio server.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.MinioServerInfo.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.MinioServerInfo.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.ResponseMessage">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">ResponseMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">detail</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.ResponseMessage" title="Link to this definition"></a></dt>
<dd><p>Response message model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ResponseMessage.detail">
<span class="sig-name descname"><span class="pre">detail</span></span><a class="headerlink" href="#pydantic_models.ResponseMessage.detail" title="Link to this definition"></a></dt>
<dd><p>The message.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.ResponseMessage.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.ResponseMessage.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.RootMessage">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">RootMessage</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tags</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">organization</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuda_available</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cuda_capable_devices_count</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.RootMessage" title="Link to this definition"></a></dt>
<dd><p>Root message model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#pydantic_models.RootMessage.name" title="Link to this definition"></a></dt>
<dd><p>The name of the server.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.tags">
<span class="sig-name descname"><span class="pre">tags</span></span><a class="headerlink" href="#pydantic_models.RootMessage.tags" title="Link to this definition"></a></dt>
<dd><p>The server tags.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.group">
<span class="sig-name descname"><span class="pre">group</span></span><a class="headerlink" href="#pydantic_models.RootMessage.group" title="Link to this definition"></a></dt>
<dd><p>The group.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.organization">
<span class="sig-name descname"><span class="pre">organization</span></span><a class="headerlink" href="#pydantic_models.RootMessage.organization" title="Link to this definition"></a></dt>
<dd><p>The organization.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.domain">
<span class="sig-name descname"><span class="pre">domain</span></span><a class="headerlink" href="#pydantic_models.RootMessage.domain" title="Link to this definition"></a></dt>
<dd><p>The domain.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.version">
<span class="sig-name descname"><span class="pre">version</span></span><a class="headerlink" href="#pydantic_models.RootMessage.version" title="Link to this definition"></a></dt>
<dd><p>The version.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.cuda_available">
<span class="sig-name descname"><span class="pre">cuda_available</span></span><a class="headerlink" href="#pydantic_models.RootMessage.cuda_available" title="Link to this definition"></a></dt>
<dd><p>If cuda is available.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.cuda_capable_devices_count">
<span class="sig-name descname"><span class="pre">cuda_capable_devices_count</span></span><a class="headerlink" href="#pydantic_models.RootMessage.cuda_capable_devices_count" title="Link to this definition"></a></dt>
<dd><p>The number of cuda capable devices.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.RootMessage.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.RootMessage.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.S3Bucket">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">S3Bucket</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">bucket_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.S3Bucket" title="Link to this definition"></a></dt>
<dd><p>S3 bucket model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3Bucket.bucket_name">
<span class="sig-name descname"><span class="pre">bucket_name</span></span><a class="headerlink" href="#pydantic_models.S3Bucket.bucket_name" title="Link to this definition"></a></dt>
<dd><p>The name of the bucket.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3Bucket.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.S3Bucket.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">S3ModelFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">runner_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_major_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_minor_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.S3ModelFile" title="Link to this definition"></a></dt>
<dd><p>S3 model file model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.runner_path">
<span class="sig-name descname"><span class="pre">runner_path</span></span><a class="headerlink" href="#pydantic_models.S3ModelFile.runner_path" title="Link to this definition"></a></dt>
<dd><p>The path to the runner file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.algorithm_path">
<span class="sig-name descname"><span class="pre">algorithm_path</span></span><a class="headerlink" href="#pydantic_models.S3ModelFile.algorithm_path" title="Link to this definition"></a></dt>
<dd><p>The path to the algorithm file.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.algorithm_name">
<span class="sig-name descname"><span class="pre">algorithm_name</span></span><a class="headerlink" href="#pydantic_models.S3ModelFile.algorithm_name" title="Link to this definition"></a></dt>
<dd><p>The name of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.algorithm_major_version">
<span class="sig-name descname"><span class="pre">algorithm_major_version</span></span><a class="headerlink" href="#pydantic_models.S3ModelFile.algorithm_major_version" title="Link to this definition"></a></dt>
<dd><p>The major version of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.algorithm_minor_version">
<span class="sig-name descname"><span class="pre">algorithm_minor_version</span></span><a class="headerlink" href="#pydantic_models.S3ModelFile.algorithm_minor_version" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFile.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.S3ModelFile.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFileRecord">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">S3ModelFileRecord</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">algorithm_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.S3ModelFileRecord" title="Link to this definition"></a></dt>
<dd><p>S3 model file record model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFileRecord.algorithm_key">
<span class="sig-name descname"><span class="pre">algorithm_key</span></span><a class="headerlink" href="#pydantic_models.S3ModelFileRecord.algorithm_key" title="Link to this definition"></a></dt>
<dd><p>The key of the algorithm.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.S3ModelFileRecord.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.S3ModelFileRecord.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pydantic_models.UrlResponse">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pydantic_models.</span></span><span class="sig-name descname"><span class="pre">UrlResponse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#pydantic_models.UrlResponse" title="Link to this definition"></a></dt>
<dd><p>Url response model.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.UrlResponse.url">
<span class="sig-name descname"><span class="pre">url</span></span><a class="headerlink" href="#pydantic_models.UrlResponse.url" title="Link to this definition"></a></dt>
<dd><p>The url.</p>
<dl class="field-list simple">
<dt class="field-odd">Type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pydantic_models.UrlResponse.model_config">
<span class="sig-name descname"><span class="pre">model_config</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ClassVar</span><span class="p"><span class="pre">[</span></span><span class="pre">ConfigDict</span><span class="p"><span class="pre">]</span></span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">{}</span></em><a class="headerlink" href="#pydantic_models.UrlResponse.model_config" title="Link to this definition"></a></dt>
<dd><p>Configuration for the model, should be a dictionary conforming to [<cite>ConfigDict</cite>][pydantic.config.ConfigDict].</p>
</dd></dl>

</dd></dl>

</section>
<section id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading"></a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, TESCAN 3DIM, s.r.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>